'use strict';function cov_1cdk7u54rp(){var path="C:\\Users\\Asus\\OneDrive\\Desktop\\backend-coding-test\\src\\app.js";var hash="5877df73519a507ef985c31161b17d7b7851c335";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Asus\\OneDrive\\Desktop\\backend-coding-test\\src\\app.js",statementMap:{"0":{start:{line:3,column:16},end:{line:3,column:34}},"1":{start:{line:4,column:12},end:{line:4,column:21}},"2":{start:{line:6,column:19},end:{line:6,column:41}},"3":{start:{line:7,column:19},end:{line:7,column:36}},"4":{start:{line:9,column:16},end:{line:9,column:34}},"5":{start:{line:11,column:15},end:{line:19,column:2}},"6":{start:{line:21,column:0},end:{line:25,column:1}},"7":{start:{line:22,column:4},end:{line:24,column:8}},"8":{start:{line:27,column:0},end:{line:188,column:2}},"9":{start:{line:28,column:4},end:{line:187,column:6}},"10":{start:{line:29,column:8},end:{line:29,column:68}},"11":{start:{line:29,column:47},end:{line:29,column:66}},"12":{start:{line:31,column:8},end:{line:103,column:11}},"13":{start:{line:32,column:34},end:{line:32,column:60}},"14":{start:{line:33,column:35},end:{line:33,column:62}},"15":{start:{line:34,column:32},end:{line:34,column:56}},"16":{start:{line:35,column:33},end:{line:35,column:58}},"17":{start:{line:36,column:30},end:{line:36,column:49}},"18":{start:{line:37,column:31},end:{line:37,column:51}},"19":{start:{line:38,column:34},end:{line:38,column:57}},"20":{start:{line:40,column:12},end:{line:46,column:13}},"21":{start:{line:41,column:16},end:{line:41,column:141}},"22":{start:{line:42,column:16},end:{line:45,column:19}},"23":{start:{line:48,column:12},end:{line:54,column:13}},"24":{start:{line:49,column:16},end:{line:49,column:139}},"25":{start:{line:50,column:16},end:{line:53,column:19}},"26":{start:{line:56,column:12},end:{line:62,column:13}},"27":{start:{line:57,column:16},end:{line:57,column:88}},"28":{start:{line:58,column:16},end:{line:61,column:19}},"29":{start:{line:64,column:12},end:{line:70,column:13}},"30":{start:{line:65,column:16},end:{line:65,column:88}},"31":{start:{line:66,column:16},end:{line:69,column:19}},"32":{start:{line:72,column:12},end:{line:78,column:13}},"33":{start:{line:73,column:16},end:{line:73,column:88}},"34":{start:{line:74,column:16},end:{line:77,column:19}},"35":{start:{line:80,column:25},end:{line:80,column:171}},"36":{start:{line:82,column:27},end:{line:102,column:14}},"37":{start:{line:83,column:16},end:{line:89,column:17}},"38":{start:{line:84,column:20},end:{line:84,column:56}},"39":{start:{line:85,column:20},end:{line:88,column:23}},"40":{start:{line:91,column:16},end:{line:101,column:19}},"41":{start:{line:92,column:20},end:{line:98,column:21}},"42":{start:{line:93,column:24},end:{line:93,column:60}},"43":{start:{line:94,column:24},end:{line:97,column:27}},"44":{start:{line:100,column:20},end:{line:100,column:35}},"45":{start:{line:105,column:8},end:{line:163,column:11}},"46":{start:{line:106,column:23},end:{line:106,column:37}},"47":{start:{line:107,column:31},end:{line:107,column:52}},"48":{start:{line:108,column:24},end:{line:108,column:26}},"49":{start:{line:109,column:12},end:{line:162,column:13}},"50":{start:{line:110,column:16},end:{line:140,column:17}},"51":{start:{line:111,column:33},end:{line:111,column:53}},"52":{start:{line:113,column:20},end:{line:134,column:23}},"53":{start:{line:117,column:24},end:{line:124,column:25}},"54":{start:{line:118,column:28},end:{line:118,column:64}},"55":{start:{line:119,column:28},end:{line:119,column:44}},"56":{start:{line:120,column:28},end:{line:123,column:31}},"57":{start:{line:126,column:24},end:{line:131,column:25}},"58":{start:{line:127,column:28},end:{line:130,column:31}},"59":{start:{line:133,column:24},end:{line:133,column:39}},"60":{start:{line:136,column:20},end:{line:139,column:23}},"61":{start:{line:142,column:16},end:{line:142,column:45}},"62":{start:{line:143,column:16},end:{line:161,column:19}},"63":{start:{line:144,column:20},end:{line:151,column:21}},"64":{start:{line:145,column:24},end:{line:145,column:60}},"65":{start:{line:146,column:24},end:{line:146,column:40}},"66":{start:{line:147,column:24},end:{line:150,column:27}},"67":{start:{line:153,column:20},end:{line:158,column:21}},"68":{start:{line:154,column:24},end:{line:157,column:27}},"69":{start:{line:160,column:20},end:{line:160,column:35}},"70":{start:{line:165,column:8},end:{line:184,column:11}},"71":{start:{line:166,column:12},end:{line:183,column:15}},"72":{start:{line:167,column:16},end:{line:173,column:17}},"73":{start:{line:168,column:20},end:{line:168,column:56}},"74":{start:{line:169,column:20},end:{line:172,column:23}},"75":{start:{line:175,column:16},end:{line:180,column:17}},"76":{start:{line:176,column:20},end:{line:179,column:23}},"77":{start:{line:182,column:16},end:{line:182,column:31}},"78":{start:{line:186,column:8},end:{line:186,column:21}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:31},end:{line:188,column:1}},line:27},"1":{name:"(anonymous_1)",decl:{start:{line:28,column:23},end:{line:28,column:24}},loc:{start:{line:28,column:50},end:{line:187,column:5}},line:28},"2":{name:"(anonymous_2)",decl:{start:{line:29,column:27},end:{line:29,column:28}},loc:{start:{line:29,column:47},end:{line:29,column:66}},line:29},"3":{name:"(anonymous_3)",decl:{start:{line:31,column:39},end:{line:31,column:40}},loc:{start:{line:31,column:59},end:{line:103,column:9}},line:31},"4":{name:"(anonymous_4)",decl:{start:{line:82,column:168},end:{line:82,column:169}},loc:{start:{line:82,column:189},end:{line:102,column:13}},line:82},"5":{name:"(anonymous_5)",decl:{start:{line:91,column:76},end:{line:91,column:77}},loc:{start:{line:91,column:103},end:{line:101,column:17}},line:91},"6":{name:"(anonymous_6)",decl:{start:{line:105,column:26},end:{line:105,column:27}},loc:{start:{line:105,column:46},end:{line:163,column:9}},line:105},"7":{name:"(anonymous_7)",decl:{start:{line:116,column:23},end:{line:116,column:24}},loc:{start:{line:116,column:49},end:{line:134,column:21}},line:116},"8":{name:"(anonymous_8)",decl:{start:{line:143,column:30},end:{line:143,column:31}},loc:{start:{line:143,column:57},end:{line:161,column:17}},line:143},"9":{name:"(anonymous_9)",decl:{start:{line:165,column:30},end:{line:165,column:31}},loc:{start:{line:165,column:50},end:{line:184,column:9}},line:165},"10":{name:"(anonymous_10)",decl:{start:{line:166,column:74},end:{line:166,column:75}},loc:{start:{line:166,column:100},end:{line:183,column:13}},line:166}},branchMap:{"0":{loc:{start:{line:21,column:0},end:{line:25,column:1}},type:"if",locations:[{start:{line:21,column:0},end:{line:25,column:1}},{start:{line:21,column:0},end:{line:25,column:1}}],line:21},"1":{loc:{start:{line:40,column:12},end:{line:46,column:13}},type:"if",locations:[{start:{line:40,column:12},end:{line:46,column:13}},{start:{line:40,column:12},end:{line:46,column:13}}],line:40},"2":{loc:{start:{line:40,column:16},end:{line:40,column:106}},type:"binary-expr",locations:[{start:{line:40,column:16},end:{line:40,column:35}},{start:{line:40,column:39},end:{line:40,column:57}},{start:{line:40,column:61},end:{line:40,column:82}},{start:{line:40,column:86},end:{line:40,column:106}}],line:40},"3":{loc:{start:{line:48,column:12},end:{line:54,column:13}},type:"if",locations:[{start:{line:48,column:12},end:{line:54,column:13}},{start:{line:48,column:12},end:{line:54,column:13}}],line:48},"4":{loc:{start:{line:48,column:16},end:{line:48,column:98}},type:"binary-expr",locations:[{start:{line:48,column:16},end:{line:48,column:33}},{start:{line:48,column:37},end:{line:48,column:53}},{start:{line:48,column:57},end:{line:48,column:76}},{start:{line:48,column:80},end:{line:48,column:98}}],line:48},"5":{loc:{start:{line:56,column:12},end:{line:62,column:13}},type:"if",locations:[{start:{line:56,column:12},end:{line:62,column:13}},{start:{line:56,column:12},end:{line:62,column:13}}],line:56},"6":{loc:{start:{line:56,column:16},end:{line:56,column:69}},type:"binary-expr",locations:[{start:{line:56,column:16},end:{line:56,column:45}},{start:{line:56,column:49},end:{line:56,column:69}}],line:56},"7":{loc:{start:{line:64,column:12},end:{line:70,column:13}},type:"if",locations:[{start:{line:64,column:12},end:{line:70,column:13}},{start:{line:64,column:12},end:{line:70,column:13}}],line:64},"8":{loc:{start:{line:64,column:16},end:{line:64,column:71}},type:"binary-expr",locations:[{start:{line:64,column:16},end:{line:64,column:46}},{start:{line:64,column:50},end:{line:64,column:71}}],line:64},"9":{loc:{start:{line:72,column:12},end:{line:78,column:13}},type:"if",locations:[{start:{line:72,column:12},end:{line:78,column:13}},{start:{line:72,column:12},end:{line:78,column:13}}],line:72},"10":{loc:{start:{line:72,column:16},end:{line:72,column:77}},type:"binary-expr",locations:[{start:{line:72,column:16},end:{line:72,column:49}},{start:{line:72,column:53},end:{line:72,column:77}}],line:72},"11":{loc:{start:{line:83,column:16},end:{line:89,column:17}},type:"if",locations:[{start:{line:83,column:16},end:{line:89,column:17}},{start:{line:83,column:16},end:{line:89,column:17}}],line:83},"12":{loc:{start:{line:92,column:20},end:{line:98,column:21}},type:"if",locations:[{start:{line:92,column:20},end:{line:98,column:21}},{start:{line:92,column:20},end:{line:98,column:21}}],line:92},"13":{loc:{start:{line:109,column:12},end:{line:162,column:13}},type:"if",locations:[{start:{line:109,column:12},end:{line:162,column:13}},{start:{line:109,column:12},end:{line:162,column:13}}],line:109},"14":{loc:{start:{line:109,column:15},end:{line:109,column:60}},type:"binary-expr",locations:[{start:{line:109,column:15},end:{line:109,column:32}},{start:{line:109,column:36},end:{line:109,column:60}}],line:109},"15":{loc:{start:{line:110,column:16},end:{line:140,column:17}},type:"if",locations:[{start:{line:110,column:16},end:{line:140,column:17}},{start:{line:110,column:16},end:{line:140,column:17}}],line:110},"16":{loc:{start:{line:110,column:19},end:{line:110,column:48}},type:"binary-expr",locations:[{start:{line:110,column:19},end:{line:110,column:28}},{start:{line:110,column:32},end:{line:110,column:48}}],line:110},"17":{loc:{start:{line:117,column:24},end:{line:124,column:25}},type:"if",locations:[{start:{line:117,column:24},end:{line:124,column:25}},{start:{line:117,column:24},end:{line:124,column:25}}],line:117},"18":{loc:{start:{line:126,column:24},end:{line:131,column:25}},type:"if",locations:[{start:{line:126,column:24},end:{line:131,column:25}},{start:{line:126,column:24},end:{line:131,column:25}}],line:126},"19":{loc:{start:{line:144,column:20},end:{line:151,column:21}},type:"if",locations:[{start:{line:144,column:20},end:{line:151,column:21}},{start:{line:144,column:20},end:{line:151,column:21}}],line:144},"20":{loc:{start:{line:153,column:20},end:{line:158,column:21}},type:"if",locations:[{start:{line:153,column:20},end:{line:158,column:21}},{start:{line:153,column:20},end:{line:158,column:21}}],line:153},"21":{loc:{start:{line:167,column:16},end:{line:173,column:17}},type:"if",locations:[{start:{line:167,column:16},end:{line:173,column:17}},{start:{line:167,column:16},end:{line:173,column:17}}],line:167},"22":{loc:{start:{line:175,column:16},end:{line:180,column:17}},type:"if",locations:[{start:{line:175,column:16},end:{line:180,column:17}},{start:{line:175,column:16},end:{line:180,column:17}}],line:175}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5877df73519a507ef985c31161b17d7b7851c335"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1cdk7u54rp=function(){return actualCoverage;};}return actualCoverage;}cov_1cdk7u54rp();const express=(cov_1cdk7u54rp().s[0]++,require('express'));const app=(cov_1cdk7u54rp().s[1]++,express());const bodyParser=(cov_1cdk7u54rp().s[2]++,require('body-parser'));const jsonParser=(cov_1cdk7u54rp().s[3]++,bodyParser.json());const winston=(cov_1cdk7u54rp().s[4]++,require('winston'));const logger=(cov_1cdk7u54rp().s[5]++,winston.createLogger({level:'info',format:winston.format.json(),defaultMeta:{service:'user-service'},transports:[new winston.transports.File({filename:'error.log',level:'error'}),new winston.transports.File({filename:'combined.log'})]}));cov_1cdk7u54rp().s[6]++;if(process.env.NODE_ENV!=='production'){cov_1cdk7u54rp().b[0][0]++;cov_1cdk7u54rp().s[7]++;logger.add(new winston.transports.Console({format:winston.format.simple()}));}else{cov_1cdk7u54rp().b[0][1]++;}cov_1cdk7u54rp().s[8]++;module.exports=async db=>{cov_1cdk7u54rp().f[0]++;cov_1cdk7u54rp().s[9]++;return new Promise(async(resolve,reject)=>{cov_1cdk7u54rp().f[1]++;cov_1cdk7u54rp().s[10]++;app.get('/health',async(req,res)=>{cov_1cdk7u54rp().f[2]++;cov_1cdk7u54rp().s[11]++;return res.send('Healthy');});cov_1cdk7u54rp().s[12]++;app.post('/rides',jsonParser,async(req,res)=>{cov_1cdk7u54rp().f[3]++;const startLatitude=(cov_1cdk7u54rp().s[13]++,Number(req.body.start_lat));const startLongitude=(cov_1cdk7u54rp().s[14]++,Number(req.body.start_long));const endLatitude=(cov_1cdk7u54rp().s[15]++,Number(req.body.end_lat));const endLongitude=(cov_1cdk7u54rp().s[16]++,Number(req.body.end_long));const riderName=(cov_1cdk7u54rp().s[17]++,req.body.rider_name);const driverName=(cov_1cdk7u54rp().s[18]++,req.body.driver_name);const driverVehicle=(cov_1cdk7u54rp().s[19]++,req.body.driver_vehicle);cov_1cdk7u54rp().s[20]++;if((cov_1cdk7u54rp().b[2][0]++,startLatitude<-90)||(cov_1cdk7u54rp().b[2][1]++,startLatitude>90)||(cov_1cdk7u54rp().b[2][2]++,startLongitude<-180)||(cov_1cdk7u54rp().b[2][3]++,startLongitude>180)){cov_1cdk7u54rp().b[1][0]++;cov_1cdk7u54rp().s[21]++;logger.log('error',new Error('Start latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'));cov_1cdk7u54rp().s[22]++;return res.send({error_code:'VALIDATION_ERROR',message:'Start latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'});}else{cov_1cdk7u54rp().b[1][1]++;}cov_1cdk7u54rp().s[23]++;if((cov_1cdk7u54rp().b[4][0]++,endLatitude<-90)||(cov_1cdk7u54rp().b[4][1]++,endLatitude>90)||(cov_1cdk7u54rp().b[4][2]++,endLongitude<-180)||(cov_1cdk7u54rp().b[4][3]++,endLongitude>180)){cov_1cdk7u54rp().b[3][0]++;cov_1cdk7u54rp().s[24]++;logger.log('error',new Error('End latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'));cov_1cdk7u54rp().s[25]++;return res.send({error_code:'VALIDATION_ERROR',message:'End latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'});}else{cov_1cdk7u54rp().b[3][1]++;}cov_1cdk7u54rp().s[26]++;if((cov_1cdk7u54rp().b[6][0]++,typeof riderName!=='string')||(cov_1cdk7u54rp().b[6][1]++,riderName.length<1)){cov_1cdk7u54rp().b[5][0]++;cov_1cdk7u54rp().s[27]++;logger.log('error',new Error('Rider name must be a non empty string'));cov_1cdk7u54rp().s[28]++;return res.send({error_code:'VALIDATION_ERROR',message:'Rider name must be a non empty string'});}else{cov_1cdk7u54rp().b[5][1]++;}cov_1cdk7u54rp().s[29]++;if((cov_1cdk7u54rp().b[8][0]++,typeof driverName!=='string')||(cov_1cdk7u54rp().b[8][1]++,driverName.length<1)){cov_1cdk7u54rp().b[7][0]++;cov_1cdk7u54rp().s[30]++;logger.log('error',new Error('Rider name must be a non empty string'));cov_1cdk7u54rp().s[31]++;return res.send({error_code:'VALIDATION_ERROR',message:'Rider name must be a non empty string'});}else{cov_1cdk7u54rp().b[7][1]++;}cov_1cdk7u54rp().s[32]++;if((cov_1cdk7u54rp().b[10][0]++,typeof driverVehicle!=='string')||(cov_1cdk7u54rp().b[10][1]++,driverVehicle.length<1)){cov_1cdk7u54rp().b[9][0]++;cov_1cdk7u54rp().s[33]++;logger.log('error',new Error('Rider name must be a non empty string'));cov_1cdk7u54rp().s[34]++;return res.send({error_code:'VALIDATION_ERROR',message:'Rider name must be a non empty string'});}else{cov_1cdk7u54rp().b[9][1]++;}var values=(cov_1cdk7u54rp().s[35]++,[req.body.start_lat,req.body.start_long,req.body.end_lat,req.body.end_long,req.body.rider_name,req.body.driver_name,req.body.driver_vehicle]);const result=(cov_1cdk7u54rp().s[36]++,db.run('INSERT INTO Rides(startLat, startLong, endLat, endLong, riderName, driverName, driverVehicle) VALUES (?, ?, ?, ?, ?, ?, ?)',values,async function(err){cov_1cdk7u54rp().f[4]++;cov_1cdk7u54rp().s[37]++;if(err){cov_1cdk7u54rp().b[11][0]++;cov_1cdk7u54rp().s[38]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[39]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[11][1]++;}cov_1cdk7u54rp().s[40]++;db.all('SELECT * FROM Rides WHERE rideID = ?',this.lastID,async function(err,rows){cov_1cdk7u54rp().f[5]++;cov_1cdk7u54rp().s[41]++;if(err){cov_1cdk7u54rp().b[12][0]++;cov_1cdk7u54rp().s[42]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[43]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[12][1]++;}cov_1cdk7u54rp().s[44]++;res.send(rows);});}));});cov_1cdk7u54rp().s[45]++;app.get('/rides',async(req,res)=>{cov_1cdk7u54rp().f[6]++;let page=(cov_1cdk7u54rp().s[46]++,req.query.page);let row_of_page=(cov_1cdk7u54rp().s[47]++,req.query.row_of_page);let query=(cov_1cdk7u54rp().s[48]++,``);cov_1cdk7u54rp().s[49]++;if((cov_1cdk7u54rp().b[14][0]++,page!=undefined)&&(cov_1cdk7u54rp().b[14][1]++,row_of_page!=undefined)){cov_1cdk7u54rp().b[13][0]++;cov_1cdk7u54rp().s[50]++;if((cov_1cdk7u54rp().b[16][0]++,page>-1)&&(cov_1cdk7u54rp().b[16][1]++,row_of_page>-1)){cov_1cdk7u54rp().b[15][0]++;let offset=(cov_1cdk7u54rp().s[51]++,(page-1)*row_of_page);// query = `SELECT * FROM Rides LIMIT ${row_of_page} OFFSET ${offset};`
cov_1cdk7u54rp().s[52]++;db.all('SELECT * FROM Rides LIMIT ? OFFSET ?',[row_of_page,offset],async function(err,rows){cov_1cdk7u54rp().f[7]++;cov_1cdk7u54rp().s[53]++;if(err){cov_1cdk7u54rp().b[17][0]++;cov_1cdk7u54rp().s[54]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[55]++;console.log(err);cov_1cdk7u54rp().s[56]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[17][1]++;}cov_1cdk7u54rp().s[57]++;if(rows.length===0){cov_1cdk7u54rp().b[18][0]++;cov_1cdk7u54rp().s[58]++;return res.send({error_code:'RIDES_NOT_FOUND_ERROR',message:'Could not find any rides'});}else{cov_1cdk7u54rp().b[18][1]++;}cov_1cdk7u54rp().s[59]++;res.send(rows);});}else{cov_1cdk7u54rp().b[15][1]++;cov_1cdk7u54rp().s[60]++;res.send({error_code:'PAGE AND ROWS ARE NEGATIVE',message:'Could not render negative pages or rows'});}}else{cov_1cdk7u54rp().b[13][1]++;cov_1cdk7u54rp().s[61]++;query=`SELECT * FROM Rides`;cov_1cdk7u54rp().s[62]++;db.all(query,async function(err,rows){cov_1cdk7u54rp().f[8]++;cov_1cdk7u54rp().s[63]++;if(err){cov_1cdk7u54rp().b[19][0]++;cov_1cdk7u54rp().s[64]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[65]++;console.log(err);cov_1cdk7u54rp().s[66]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[19][1]++;}cov_1cdk7u54rp().s[67]++;if(rows.length===0){cov_1cdk7u54rp().b[20][0]++;cov_1cdk7u54rp().s[68]++;return res.send({error_code:'RIDES_NOT_FOUND_ERROR',message:'Could not find any rides'});}else{cov_1cdk7u54rp().b[20][1]++;}cov_1cdk7u54rp().s[69]++;res.send(rows);});}});cov_1cdk7u54rp().s[70]++;app.get('/rides/:id',async(req,res)=>{cov_1cdk7u54rp().f[9]++;cov_1cdk7u54rp().s[71]++;db.all('SELECT * FROM Rides WHERE rideID = ?',req.params.id,async function(err,rows){cov_1cdk7u54rp().f[10]++;cov_1cdk7u54rp().s[72]++;if(err){cov_1cdk7u54rp().b[21][0]++;cov_1cdk7u54rp().s[73]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[74]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[21][1]++;}cov_1cdk7u54rp().s[75]++;if(rows.length===0){cov_1cdk7u54rp().b[22][0]++;cov_1cdk7u54rp().s[76]++;return res.send({error_code:'RIDES_NOT_FOUND_ERROR',message:'Could not find any rides'});}else{cov_1cdk7u54rp().b[22][1]++;}cov_1cdk7u54rp().s[77]++;res.send(rows);});});cov_1cdk7u54rp().s[78]++;resolve(app);});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImJvZHlQYXJzZXIiLCJqc29uUGFyc2VyIiwianNvbiIsIndpbnN0b24iLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsImZvcm1hdCIsImRlZmF1bHRNZXRhIiwic2VydmljZSIsInRyYW5zcG9ydHMiLCJGaWxlIiwiZmlsZW5hbWUiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJhZGQiLCJDb25zb2xlIiwic2ltcGxlIiwibW9kdWxlIiwiZXhwb3J0cyIsImRiIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kIiwicG9zdCIsInN0YXJ0TGF0aXR1ZGUiLCJOdW1iZXIiLCJib2R5Iiwic3RhcnRfbGF0Iiwic3RhcnRMb25naXR1ZGUiLCJzdGFydF9sb25nIiwiZW5kTGF0aXR1ZGUiLCJlbmRfbGF0IiwiZW5kTG9uZ2l0dWRlIiwiZW5kX2xvbmciLCJyaWRlck5hbWUiLCJyaWRlcl9uYW1lIiwiZHJpdmVyTmFtZSIsImRyaXZlcl9uYW1lIiwiZHJpdmVyVmVoaWNsZSIsImRyaXZlcl92ZWhpY2xlIiwibG9nIiwiRXJyb3IiLCJlcnJvcl9jb2RlIiwibWVzc2FnZSIsImxlbmd0aCIsInZhbHVlcyIsInJlc3VsdCIsInJ1biIsImVyciIsImFsbCIsImxhc3RJRCIsInJvd3MiLCJwYWdlIiwicXVlcnkiLCJyb3dfb2ZfcGFnZSIsInVuZGVmaW5lZCIsIm9mZnNldCIsImNvbnNvbGUiLCJwYXJhbXMiLCJpZCJdLCJtYXBwaW5ncyI6IkFBQUEsYSx3d1lBZVk7MkZBYlosS0FBTUEsQ0FBQUEsT0FBTywwQkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFiLENBQ0EsS0FBTUMsQ0FBQUEsR0FBRywwQkFBR0YsT0FBTyxFQUFWLENBQVQsQ0FFQSxLQUFNRyxDQUFBQSxVQUFVLDBCQUFHRixPQUFPLENBQUMsYUFBRCxDQUFWLENBQWhCLENBQ0EsS0FBTUcsQ0FBQUEsVUFBVSwwQkFBR0QsVUFBVSxDQUFDRSxJQUFYLEVBQUgsQ0FBaEIsQ0FFQSxLQUFNQyxDQUFBQSxPQUFPLDBCQUFHTCxPQUFPLENBQUMsU0FBRCxDQUFWLENBQWIsQ0FFQSxLQUFNTSxDQUFBQSxNQUFNLDBCQUFHRCxPQUFPLENBQUNFLFlBQVIsQ0FBcUIsQ0FDaENDLEtBQUssQ0FBRSxNQUR5QixDQUVoQ0MsTUFBTSxDQUFFSixPQUFPLENBQUNJLE1BQVIsQ0FBZUwsSUFBZixFQUZ3QixDQUdoQ00sV0FBVyxDQUFFLENBQUVDLE9BQU8sQ0FBRSxjQUFYLENBSG1CLENBSWhDQyxVQUFVLENBQUUsQ0FDVixHQUFJUCxDQUFBQSxPQUFPLENBQUNPLFVBQVIsQ0FBbUJDLElBQXZCLENBQTRCLENBQUVDLFFBQVEsQ0FBRSxXQUFaLENBQXlCTixLQUFLLENBQUUsT0FBaEMsQ0FBNUIsQ0FEVSxDQUVWLEdBQUlILENBQUFBLE9BQU8sQ0FBQ08sVUFBUixDQUFtQkMsSUFBdkIsQ0FBNEIsQ0FBRUMsUUFBUSxDQUFFLGNBQVosQ0FBNUIsQ0FGVSxDQUpvQixDQUFyQixDQUFILENBQVosQyx3QkFVQSxHQUFJQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBWixHQUF5QixZQUE3QixDQUEyQyxvREFDdkNYLE1BQU0sQ0FBQ1ksR0FBUCxDQUFXLEdBQUliLENBQUFBLE9BQU8sQ0FBQ08sVUFBUixDQUFtQk8sT0FBdkIsQ0FBK0IsQ0FDeENWLE1BQU0sQ0FBRUosT0FBTyxDQUFDSSxNQUFSLENBQWVXLE1BQWYsRUFEZ0MsQ0FBL0IsQ0FBWCxFQUdILENBSkQsaUMsd0JBTUFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixLQUFPQyxDQUFBQSxFQUFQLEVBQWMsaURBQzNCLE1BQU8sSUFBSUMsQ0FBQUEsT0FBSixDQUFZLE1BQU9DLE9BQVAsQ0FBZ0JDLE1BQWhCLEdBQTJCLGtEQUMxQ3pCLEdBQUcsQ0FBQzBCLEdBQUosQ0FBUSxTQUFSLENBQW1CLE1BQU9DLEdBQVAsQ0FBWUMsR0FBWixHQUFvQix3REFBQUEsQ0FBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVMsU0FBVCxFQUFtQixDQUExRCxFQUQwQyx5QkFHMUM3QixHQUFHLENBQUM4QixJQUFKLENBQVMsUUFBVCxDQUFtQjVCLFVBQW5CLENBQStCLE1BQU95QixHQUFQLENBQVlDLEdBQVosR0FBb0IseUJBQy9DLEtBQU1HLENBQUFBLGFBQWEsMkJBQUdDLE1BQU0sQ0FBQ0wsR0FBRyxDQUFDTSxJQUFKLENBQVNDLFNBQVYsQ0FBVCxDQUFuQixDQUNBLEtBQU1DLENBQUFBLGNBQWMsMkJBQUdILE1BQU0sQ0FBQ0wsR0FBRyxDQUFDTSxJQUFKLENBQVNHLFVBQVYsQ0FBVCxDQUFwQixDQUNBLEtBQU1DLENBQUFBLFdBQVcsMkJBQUdMLE1BQU0sQ0FBQ0wsR0FBRyxDQUFDTSxJQUFKLENBQVNLLE9BQVYsQ0FBVCxDQUFqQixDQUNBLEtBQU1DLENBQUFBLFlBQVksMkJBQUdQLE1BQU0sQ0FBQ0wsR0FBRyxDQUFDTSxJQUFKLENBQVNPLFFBQVYsQ0FBVCxDQUFsQixDQUNBLEtBQU1DLENBQUFBLFNBQVMsMkJBQUdkLEdBQUcsQ0FBQ00sSUFBSixDQUFTUyxVQUFaLENBQWYsQ0FDQSxLQUFNQyxDQUFBQSxVQUFVLDJCQUFHaEIsR0FBRyxDQUFDTSxJQUFKLENBQVNXLFdBQVosQ0FBaEIsQ0FDQSxLQUFNQyxDQUFBQSxhQUFhLDJCQUFHbEIsR0FBRyxDQUFDTSxJQUFKLENBQVNhLGNBQVosQ0FBbkIsQ0FQK0MseUJBUy9DLEdBQUksNEJBQUFmLGFBQWEsQ0FBRyxDQUFDLEVBQWpCLCtCQUF1QkEsYUFBYSxDQUFHLEVBQXZDLCtCQUE2Q0ksY0FBYyxDQUFHLENBQUMsR0FBL0QsK0JBQXNFQSxjQUFjLENBQUcsR0FBdkYsQ0FBSixDQUFnRyxxREFDNUY5QixNQUFNLENBQUMwQyxHQUFQLENBQVcsT0FBWCxDQUFvQixHQUFJQyxDQUFBQSxLQUFKLENBQVUsNEZBQVYsQ0FBcEIsRUFENEYseUJBRTVGLE1BQU9wQixDQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxDQUNab0IsVUFBVSxDQUFFLGtCQURBLENBRVpDLE9BQU8sQ0FBRSw0RkFGRyxDQUFULENBQVAsQ0FJSCxDQU5ELGlDQVQrQyx5QkFpQi9DLEdBQUksNEJBQUFiLFdBQVcsQ0FBRyxDQUFDLEVBQWYsK0JBQXFCQSxXQUFXLENBQUcsRUFBbkMsK0JBQXlDRSxZQUFZLENBQUcsQ0FBQyxHQUF6RCwrQkFBZ0VBLFlBQVksQ0FBRyxHQUEvRSxDQUFKLENBQXdGLHFEQUNwRmxDLE1BQU0sQ0FBQzBDLEdBQVAsQ0FBVyxPQUFYLENBQW9CLEdBQUlDLENBQUFBLEtBQUosQ0FBVSwwRkFBVixDQUFwQixFQURvRix5QkFFcEYsTUFBT3BCLENBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLENBQ1pvQixVQUFVLENBQUUsa0JBREEsQ0FFWkMsT0FBTyxDQUFFLDBGQUZHLENBQVQsQ0FBUCxDQUlILENBTkQsaUNBakIrQyx5QkF5Qi9DLEdBQUksa0NBQU9ULENBQUFBLFNBQVAsR0FBcUIsUUFBckIsK0JBQWlDQSxTQUFTLENBQUNVLE1BQVYsQ0FBbUIsQ0FBcEQsQ0FBSixDQUEyRCxxREFDdkQ5QyxNQUFNLENBQUMwQyxHQUFQLENBQVcsT0FBWCxDQUFvQixHQUFJQyxDQUFBQSxLQUFKLENBQVUsdUNBQVYsQ0FBcEIsRUFEdUQseUJBRXZELE1BQU9wQixDQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxDQUNab0IsVUFBVSxDQUFFLGtCQURBLENBRVpDLE9BQU8sQ0FBRSx1Q0FGRyxDQUFULENBQVAsQ0FJSCxDQU5ELGlDQXpCK0MseUJBaUMvQyxHQUFJLGtDQUFPUCxDQUFBQSxVQUFQLEdBQXNCLFFBQXRCLCtCQUFrQ0EsVUFBVSxDQUFDUSxNQUFYLENBQW9CLENBQXRELENBQUosQ0FBNkQscURBQ3pEOUMsTUFBTSxDQUFDMEMsR0FBUCxDQUFXLE9BQVgsQ0FBb0IsR0FBSUMsQ0FBQUEsS0FBSixDQUFVLHVDQUFWLENBQXBCLEVBRHlELHlCQUV6RCxNQUFPcEIsQ0FBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVMsQ0FDWm9CLFVBQVUsQ0FBRSxrQkFEQSxDQUVaQyxPQUFPLENBQUUsdUNBRkcsQ0FBVCxDQUFQLENBSUgsQ0FORCxpQ0FqQytDLHlCQXlDL0MsR0FBSSxtQ0FBT0wsQ0FBQUEsYUFBUCxHQUF5QixRQUF6QixnQ0FBcUNBLGFBQWEsQ0FBQ00sTUFBZCxDQUF1QixDQUE1RCxDQUFKLENBQW1FLHFEQUMvRDlDLE1BQU0sQ0FBQzBDLEdBQVAsQ0FBVyxPQUFYLENBQW9CLEdBQUlDLENBQUFBLEtBQUosQ0FBVSx1Q0FBVixDQUFwQixFQUQrRCx5QkFFL0QsTUFBT3BCLENBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLENBQ1pvQixVQUFVLENBQUUsa0JBREEsQ0FFWkMsT0FBTyxDQUFFLHVDQUZHLENBQVQsQ0FBUCxDQUlILENBTkQsaUNBUUEsR0FBSUUsQ0FBQUEsTUFBTSwyQkFBRyxDQUFDekIsR0FBRyxDQUFDTSxJQUFKLENBQVNDLFNBQVYsQ0FBcUJQLEdBQUcsQ0FBQ00sSUFBSixDQUFTRyxVQUE5QixDQUEwQ1QsR0FBRyxDQUFDTSxJQUFKLENBQVNLLE9BQW5ELENBQTREWCxHQUFHLENBQUNNLElBQUosQ0FBU08sUUFBckUsQ0FBK0ViLEdBQUcsQ0FBQ00sSUFBSixDQUFTUyxVQUF4RixDQUFvR2YsR0FBRyxDQUFDTSxJQUFKLENBQVNXLFdBQTdHLENBQTBIakIsR0FBRyxDQUFDTSxJQUFKLENBQVNhLGNBQW5JLENBQUgsQ0FBVixDQUVBLEtBQU1PLENBQUFBLE1BQU0sMkJBQUcvQixFQUFFLENBQUNnQyxHQUFILENBQU8sNEhBQVAsQ0FBcUlGLE1BQXJJLENBQTZJLGVBQWdCRyxHQUFoQixDQUFxQixrREFDN0ssR0FBSUEsR0FBSixDQUFTLHNEQUNMbEQsTUFBTSxDQUFDMEMsR0FBUCxDQUFXLE9BQVgsQ0FBb0IsR0FBSUMsQ0FBQUEsS0FBSixDQUFVTyxHQUFWLENBQXBCLEVBREsseUJBRUwsTUFBTzNCLENBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLENBQ1pvQixVQUFVLENBQUUsY0FEQSxDQUVaQyxPQUFPLENBQUUsZUFGRyxDQUFULENBQVAsQ0FJSCxDQU5ELGtDQUQ2Syx5QkFTN0s1QixFQUFFLENBQUNrQyxHQUFILENBQU8sc0NBQVAsQ0FBK0MsS0FBS0MsTUFBcEQsQ0FBNEQsZUFBZ0JGLEdBQWhCLENBQXFCRyxJQUFyQixDQUEyQixrREFDbkYsR0FBSUgsR0FBSixDQUFTLHNEQUNMbEQsTUFBTSxDQUFDMEMsR0FBUCxDQUFXLE9BQVgsQ0FBb0IsR0FBSUMsQ0FBQUEsS0FBSixDQUFVTyxHQUFWLENBQXBCLEVBREsseUJBRUwsTUFBTzNCLENBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLENBQ1pvQixVQUFVLENBQUUsY0FEQSxDQUVaQyxPQUFPLENBQUUsZUFGRyxDQUFULENBQVAsQ0FJSCxDQU5ELGtDQURtRix5QkFTbkZ0QixHQUFHLENBQUNDLElBQUosQ0FBUzZCLElBQVQsRUFDSCxDQVZELEVBV0gsQ0FwQmMsQ0FBSCxDQUFaLENBcUJILENBeEVELEVBSDBDLHlCQTZFMUMxRCxHQUFHLENBQUMwQixHQUFKLENBQVEsUUFBUixDQUFrQixNQUFPQyxHQUFQLENBQVlDLEdBQVosR0FBb0IseUJBQ2xDLEdBQUkrQixDQUFBQSxJQUFJLDJCQUFHaEMsR0FBRyxDQUFDaUMsS0FBSixDQUFVRCxJQUFiLENBQVIsQ0FDQSxHQUFJRSxDQUFBQSxXQUFXLDJCQUFJbEMsR0FBRyxDQUFDaUMsS0FBSixDQUFVQyxXQUFkLENBQWYsQ0FDQSxHQUFJRCxDQUFBQSxLQUFLLDJCQUFJLEVBQUosQ0FBVCxDQUhrQyx5QkFJbEMsR0FBRyw2QkFBQUQsSUFBSSxFQUFJRyxTQUFSLGdDQUFxQkQsV0FBVyxFQUFJQyxTQUFwQyxDQUFILENBQWlELHNEQUM3QyxHQUFHLDZCQUFBSCxJQUFJLENBQUcsQ0FBQyxDQUFSLGdDQUFhRSxXQUFXLENBQUcsQ0FBQyxDQUE1QixDQUFILENBQWlDLDZCQUM3QixHQUFJRSxDQUFBQSxNQUFNLDJCQUFHLENBQUNKLElBQUksQ0FBQyxDQUFOLEVBQVNFLFdBQVosQ0FBVixDQUNBO0FBRjZCLHlCQUc3QnZDLEVBQUUsQ0FBQ2tDLEdBQUgsQ0FBTyxzQ0FBUCxDQUErQyxDQUMzQ0ssV0FEMkMsQ0FFM0NFLE1BRjJDLENBQS9DLENBR0csZUFBZ0JSLEdBQWhCLENBQXFCRyxJQUFyQixDQUEwQixrREFDekIsR0FBSUgsR0FBSixDQUFTLHNEQUNMbEQsTUFBTSxDQUFDMEMsR0FBUCxDQUFXLE9BQVgsQ0FBb0IsR0FBSUMsQ0FBQUEsS0FBSixDQUFVTyxHQUFWLENBQXBCLEVBREsseUJBRUxTLE9BQU8sQ0FBQ2pCLEdBQVIsQ0FBWVEsR0FBWixFQUZLLHlCQUdMLE1BQU8zQixDQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxDQUNab0IsVUFBVSxDQUFFLGNBREEsQ0FFWkMsT0FBTyxDQUFFLGVBRkcsQ0FBVCxDQUFQLENBSUgsQ0FQRCxrQ0FEeUIseUJBVXpCLEdBQUlRLElBQUksQ0FBQ1AsTUFBTCxHQUFnQixDQUFwQixDQUF1QixzREFDbkIsTUFBT3ZCLENBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLENBQ1pvQixVQUFVLENBQUUsdUJBREEsQ0FFWkMsT0FBTyxDQUFFLDBCQUZHLENBQVQsQ0FBUCxDQUlILENBTEQsa0NBVnlCLHlCQWlCekJ0QixHQUFHLENBQUNDLElBQUosQ0FBUzZCLElBQVQsRUFDSCxDQXJCRCxFQXNCSCxDQXpCRCxJQXlCSyxzREFDRDlCLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLENBQ0xvQixVQUFVLENBQUUsNEJBRFAsQ0FFTEMsT0FBTyxDQUFFLHlDQUZKLENBQVQsRUFJSCxDQUNKLENBaENELElBZ0NLLHNEQUNEVSxLQUFLLENBQUkscUJBQVQsQ0FEQyx5QkFFRHRDLEVBQUUsQ0FBQ2tDLEdBQUgsQ0FBT0ksS0FBUCxDQUFjLGVBQWdCTCxHQUFoQixDQUFxQkcsSUFBckIsQ0FBMkIsa0RBQ3JDLEdBQUlILEdBQUosQ0FBUyxzREFDTGxELE1BQU0sQ0FBQzBDLEdBQVAsQ0FBVyxPQUFYLENBQW9CLEdBQUlDLENBQUFBLEtBQUosQ0FBVU8sR0FBVixDQUFwQixFQURLLHlCQUVMUyxPQUFPLENBQUNqQixHQUFSLENBQVlRLEdBQVosRUFGSyx5QkFHTCxNQUFPM0IsQ0FBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVMsQ0FDWm9CLFVBQVUsQ0FBRSxjQURBLENBRVpDLE9BQU8sQ0FBRSxlQUZHLENBQVQsQ0FBUCxDQUlILENBUEQsa0NBRHFDLHlCQVVyQyxHQUFJUSxJQUFJLENBQUNQLE1BQUwsR0FBZ0IsQ0FBcEIsQ0FBdUIsc0RBQ25CLE1BQU92QixDQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBUyxDQUNab0IsVUFBVSxDQUFFLHVCQURBLENBRVpDLE9BQU8sQ0FBRSwwQkFGRyxDQUFULENBQVAsQ0FJSCxDQUxELGtDQVZxQyx5QkFpQnJDdEIsR0FBRyxDQUFDQyxJQUFKLENBQVM2QixJQUFULEVBQ0gsQ0FsQkQsRUFtQkgsQ0FDSixDQTFERCxFQTdFMEMseUJBeUkxQzFELEdBQUcsQ0FBQzBCLEdBQUosQ0FBUSxZQUFSLENBQXNCLE1BQU9DLEdBQVAsQ0FBWUMsR0FBWixHQUFvQixrREFDdENOLEVBQUUsQ0FBQ2tDLEdBQUgsQ0FBTyxzQ0FBUCxDQUErQzdCLEdBQUcsQ0FBQ3NDLE1BQUosQ0FBV0MsRUFBMUQsQ0FBOEQsZUFBZ0JYLEdBQWhCLENBQXFCRyxJQUFyQixDQUEwQixtREFDcEYsR0FBSUgsR0FBSixDQUFTLHNEQUNMbEQsTUFBTSxDQUFDMEMsR0FBUCxDQUFXLE9BQVgsQ0FBb0IsR0FBSUMsQ0FBQUEsS0FBSixDQUFVTyxHQUFWLENBQXBCLEVBREsseUJBRUwsTUFBTzNCLENBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLENBQ1pvQixVQUFVLENBQUUsY0FEQSxDQUVaQyxPQUFPLENBQUUsZUFGRyxDQUFULENBQVAsQ0FJSCxDQU5ELGtDQURvRix5QkFTcEYsR0FBSVEsSUFBSSxDQUFDUCxNQUFMLEdBQWdCLENBQXBCLENBQXVCLHNEQUNuQixNQUFPdkIsQ0FBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVMsQ0FDWm9CLFVBQVUsQ0FBRSx1QkFEQSxDQUVaQyxPQUFPLENBQUUsMEJBRkcsQ0FBVCxDQUFQLENBSUgsQ0FMRCxrQ0FUb0YseUJBZ0JwRnRCLEdBQUcsQ0FBQ0MsSUFBSixDQUFTNkIsSUFBVCxFQUNILENBakJELEVBa0JILENBbkJELEVBekkwQyx5QkE4SjFDbEMsT0FBTyxDQUFDeEIsR0FBRCxDQUFQLENBQ0gsQ0EvSk0sQ0FBUCxDQWdLSCxDQWpLRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG5jb25zdCBqc29uUGFyc2VyID0gYm9keVBhcnNlci5qc29uKCk7XG5cbmNvbnN0IHdpbnN0b24gPSByZXF1aXJlKCd3aW5zdG9uJyk7XG5cbmNvbnN0IGxvZ2dlciA9IHdpbnN0b24uY3JlYXRlTG9nZ2VyKHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuanNvbigpLFxuICAgIGRlZmF1bHRNZXRhOiB7IHNlcnZpY2U6ICd1c2VyLXNlcnZpY2UnIH0sXG4gICAgdHJhbnNwb3J0czogW1xuICAgICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5GaWxlKHsgZmlsZW5hbWU6ICdlcnJvci5sb2cnLCBsZXZlbDogJ2Vycm9yJyB9KSxcbiAgICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7IGZpbGVuYW1lOiAnY29tYmluZWQubG9nJyB9KSxcbiAgICBdLFxufSk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgbG9nZ2VyLmFkZChuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkNvbnNvbGUoe1xuICAgICAgZm9ybWF0OiB3aW5zdG9uLmZvcm1hdC5zaW1wbGUoKSxcbiAgICB9KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKGRiKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgYXBwLmdldCgnL2hlYWx0aCcsIGFzeW5jIChyZXEsIHJlcykgPT4gcmVzLnNlbmQoJ0hlYWx0aHknKSk7XG5cbiAgICAgICAgYXBwLnBvc3QoJy9yaWRlcycsIGpzb25QYXJzZXIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRMYXRpdHVkZSA9IE51bWJlcihyZXEuYm9keS5zdGFydF9sYXQpO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRMb25naXR1ZGUgPSBOdW1iZXIocmVxLmJvZHkuc3RhcnRfbG9uZyk7XG4gICAgICAgICAgICBjb25zdCBlbmRMYXRpdHVkZSA9IE51bWJlcihyZXEuYm9keS5lbmRfbGF0KTtcbiAgICAgICAgICAgIGNvbnN0IGVuZExvbmdpdHVkZSA9IE51bWJlcihyZXEuYm9keS5lbmRfbG9uZyk7XG4gICAgICAgICAgICBjb25zdCByaWRlck5hbWUgPSByZXEuYm9keS5yaWRlcl9uYW1lO1xuICAgICAgICAgICAgY29uc3QgZHJpdmVyTmFtZSA9IHJlcS5ib2R5LmRyaXZlcl9uYW1lO1xuICAgICAgICAgICAgY29uc3QgZHJpdmVyVmVoaWNsZSA9IHJlcS5ib2R5LmRyaXZlcl92ZWhpY2xlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc3RhcnRMYXRpdHVkZSA8IC05MCB8fCBzdGFydExhdGl0dWRlID4gOTAgfHwgc3RhcnRMb25naXR1ZGUgPCAtMTgwIHx8IHN0YXJ0TG9uZ2l0dWRlID4gMTgwKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoJ1N0YXJ0IGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgbXVzdCBiZSBiZXR3ZWVuIC05MCAtIDkwIGFuZCAtMTgwIHRvIDE4MCBkZWdyZWVzIHJlc3BlY3RpdmVseScpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTdGFydCBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlIG11c3QgYmUgYmV0d2VlbiAtOTAgLSA5MCBhbmQgLTE4MCB0byAxODAgZGVncmVlcyByZXNwZWN0aXZlbHknXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbmRMYXRpdHVkZSA8IC05MCB8fCBlbmRMYXRpdHVkZSA+IDkwIHx8IGVuZExvbmdpdHVkZSA8IC0xODAgfHwgZW5kTG9uZ2l0dWRlID4gMTgwKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoJ0VuZCBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlIG11c3QgYmUgYmV0d2VlbiAtOTAgLSA5MCBhbmQgLTE4MCB0byAxODAgZGVncmVlcyByZXNwZWN0aXZlbHknKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRW5kIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgbXVzdCBiZSBiZXR3ZWVuIC05MCAtIDkwIGFuZCAtMTgwIHRvIDE4MCBkZWdyZWVzIHJlc3BlY3RpdmVseSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHR5cGVvZiByaWRlck5hbWUgIT09ICdzdHJpbmcnIHx8IHJpZGVyTmFtZS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoJ1JpZGVyIG5hbWUgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcnKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUmlkZXIgbmFtZSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkcml2ZXJOYW1lICE9PSAnc3RyaW5nJyB8fCBkcml2ZXJOYW1lLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcignUmlkZXIgbmFtZSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZycpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdSaWRlciBuYW1lIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRyaXZlclZlaGljbGUgIT09ICdzdHJpbmcnIHx8IGRyaXZlclZlaGljbGUubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coJ2Vycm9yJywgbmV3IEVycm9yKCdSaWRlciBuYW1lIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nJykpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1JpZGVyIG5hbWUgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbcmVxLmJvZHkuc3RhcnRfbGF0LCByZXEuYm9keS5zdGFydF9sb25nLCByZXEuYm9keS5lbmRfbGF0LCByZXEuYm9keS5lbmRfbG9uZywgcmVxLmJvZHkucmlkZXJfbmFtZSwgcmVxLmJvZHkuZHJpdmVyX25hbWUsIHJlcS5ib2R5LmRyaXZlcl92ZWhpY2xlXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZGIucnVuKCdJTlNFUlQgSU5UTyBSaWRlcyhzdGFydExhdCwgc3RhcnRMb25nLCBlbmRMYXQsIGVuZExvbmcsIHJpZGVyTmFtZSwgZHJpdmVyTmFtZSwgZHJpdmVyVmVoaWNsZSkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/KScsIHZhbHVlcywgYXN5bmMgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkYi5hbGwoJ1NFTEVDVCAqIEZST00gUmlkZXMgV0hFUkUgcmlkZUlEID0gPycsIHRoaXMubGFzdElELCBhc3luYyBmdW5jdGlvbiAoZXJyLCByb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coJ2Vycm9yJywgbmV3IEVycm9yKGVycikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQocm93cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXBwLmdldCgnL3JpZGVzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgICAgICBsZXQgcGFnZSA9IHJlcS5xdWVyeS5wYWdlO1xuICAgICAgICAgICAgbGV0IHJvd19vZl9wYWdlID0gIHJlcS5xdWVyeS5yb3dfb2ZfcGFnZTtcbiAgICAgICAgICAgIGxldCBxdWVyeSA9IGBgO1xuICAgICAgICAgICAgaWYocGFnZSAhPSB1bmRlZmluZWQgJiYgcm93X29mX3BhZ2UgIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBpZihwYWdlID4gLTEgJiYgcm93X29mX3BhZ2UgPiAtMSl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSAocGFnZS0xKSpyb3dfb2ZfcGFnZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcXVlcnkgPSBgU0VMRUNUICogRlJPTSBSaWRlcyBMSU1JVCAke3Jvd19vZl9wYWdlfSBPRkZTRVQgJHtvZmZzZXR9O2BcbiAgICAgICAgICAgICAgICAgICAgZGIuYWxsKCdTRUxFQ1QgKiBGUk9NIFJpZGVzIExJTUlUID8gT0ZGU0VUID8nLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dfb2ZfcGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFxuICAgICAgICAgICAgICAgICAgICBdLCBhc3luYyBmdW5jdGlvbiAoZXJyLCByb3dzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcihlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdSSURFU19OT1RfRk9VTkRfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGZpbmQgYW55IHJpZGVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHJvd3MpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1BBR0UgQU5EIFJPV1MgQVJFIE5FR0FUSVZFJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb3VsZCBub3QgcmVuZGVyIG5lZ2F0aXZlIHBhZ2VzIG9yIHJvd3MnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gYFNFTEVDVCAqIEZST00gUmlkZXNgXG4gICAgICAgICAgICAgICAgZGIuYWxsKHF1ZXJ5LCBhc3luYyBmdW5jdGlvbiAoZXJyLCByb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coJ2Vycm9yJywgbmV3IEVycm9yKGVycikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdSSURFU19OT1RfRk9VTkRfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb3VsZCBub3QgZmluZCBhbnkgcmlkZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHJvd3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhcHAuZ2V0KCcvcmlkZXMvOmlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgICAgICBkYi5hbGwoJ1NFTEVDVCAqIEZST00gUmlkZXMgV0hFUkUgcmlkZUlEID0gPycsIHJlcS5wYXJhbXMuaWQsIGFzeW5jIGZ1bmN0aW9uIChlcnIsIHJvd3Mpe1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdSSURFU19OT1RfRk9VTkRfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCBmaW5kIGFueSByaWRlcydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQocm93cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzb2x2ZShhcHApO1xuICAgIH0pXG59O1xuIl19