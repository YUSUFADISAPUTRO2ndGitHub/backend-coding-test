'use strict';function cov_1cdk7u54rp(){var path="C:\\Users\\Asus\\OneDrive\\Desktop\\backend-coding-test\\src\\app.js";var hash="667043e0f77d672026bec3cc9229c9c0c3f5168c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Asus\\OneDrive\\Desktop\\backend-coding-test\\src\\app.js",statementMap:{"0":{start:{line:3,column:16},end:{line:3,column:34}},"1":{start:{line:4,column:12},end:{line:4,column:21}},"2":{start:{line:6,column:19},end:{line:6,column:41}},"3":{start:{line:7,column:19},end:{line:7,column:36}},"4":{start:{line:9,column:16},end:{line:9,column:34}},"5":{start:{line:11,column:15},end:{line:19,column:2}},"6":{start:{line:21,column:0},end:{line:25,column:1}},"7":{start:{line:22,column:4},end:{line:24,column:8}},"8":{start:{line:27,column:0},end:{line:192,column:2}},"9":{start:{line:28,column:4},end:{line:191,column:6}},"10":{start:{line:29,column:8},end:{line:33,column:10}},"11":{start:{line:30,column:12},end:{line:32,column:14}},"12":{start:{line:31,column:16},end:{line:31,column:44}},"13":{start:{line:35,column:8},end:{line:107,column:11}},"14":{start:{line:36,column:34},end:{line:36,column:60}},"15":{start:{line:37,column:35},end:{line:37,column:62}},"16":{start:{line:38,column:32},end:{line:38,column:56}},"17":{start:{line:39,column:33},end:{line:39,column:58}},"18":{start:{line:40,column:30},end:{line:40,column:49}},"19":{start:{line:41,column:31},end:{line:41,column:51}},"20":{start:{line:42,column:34},end:{line:42,column:57}},"21":{start:{line:44,column:12},end:{line:50,column:13}},"22":{start:{line:45,column:16},end:{line:45,column:141}},"23":{start:{line:46,column:16},end:{line:49,column:19}},"24":{start:{line:52,column:12},end:{line:58,column:13}},"25":{start:{line:53,column:16},end:{line:53,column:139}},"26":{start:{line:54,column:16},end:{line:57,column:19}},"27":{start:{line:60,column:12},end:{line:66,column:13}},"28":{start:{line:61,column:16},end:{line:61,column:88}},"29":{start:{line:62,column:16},end:{line:65,column:19}},"30":{start:{line:68,column:12},end:{line:74,column:13}},"31":{start:{line:69,column:16},end:{line:69,column:88}},"32":{start:{line:70,column:16},end:{line:73,column:19}},"33":{start:{line:76,column:12},end:{line:82,column:13}},"34":{start:{line:77,column:16},end:{line:77,column:88}},"35":{start:{line:78,column:16},end:{line:81,column:19}},"36":{start:{line:84,column:25},end:{line:84,column:171}},"37":{start:{line:86,column:27},end:{line:106,column:14}},"38":{start:{line:87,column:16},end:{line:93,column:17}},"39":{start:{line:88,column:20},end:{line:88,column:56}},"40":{start:{line:89,column:20},end:{line:92,column:23}},"41":{start:{line:95,column:16},end:{line:105,column:19}},"42":{start:{line:96,column:20},end:{line:102,column:21}},"43":{start:{line:97,column:24},end:{line:97,column:60}},"44":{start:{line:98,column:24},end:{line:101,column:27}},"45":{start:{line:104,column:20},end:{line:104,column:35}},"46":{start:{line:109,column:8},end:{line:167,column:11}},"47":{start:{line:110,column:23},end:{line:110,column:37}},"48":{start:{line:111,column:31},end:{line:111,column:52}},"49":{start:{line:112,column:24},end:{line:112,column:26}},"50":{start:{line:113,column:12},end:{line:166,column:13}},"51":{start:{line:114,column:16},end:{line:144,column:17}},"52":{start:{line:115,column:33},end:{line:115,column:53}},"53":{start:{line:117,column:20},end:{line:138,column:23}},"54":{start:{line:121,column:24},end:{line:128,column:25}},"55":{start:{line:122,column:28},end:{line:122,column:64}},"56":{start:{line:123,column:28},end:{line:123,column:44}},"57":{start:{line:124,column:28},end:{line:127,column:31}},"58":{start:{line:130,column:24},end:{line:135,column:25}},"59":{start:{line:131,column:28},end:{line:134,column:31}},"60":{start:{line:137,column:24},end:{line:137,column:39}},"61":{start:{line:140,column:20},end:{line:143,column:23}},"62":{start:{line:146,column:16},end:{line:146,column:45}},"63":{start:{line:147,column:16},end:{line:165,column:19}},"64":{start:{line:148,column:20},end:{line:155,column:21}},"65":{start:{line:149,column:24},end:{line:149,column:60}},"66":{start:{line:150,column:24},end:{line:150,column:40}},"67":{start:{line:151,column:24},end:{line:154,column:27}},"68":{start:{line:157,column:20},end:{line:162,column:21}},"69":{start:{line:158,column:24},end:{line:161,column:27}},"70":{start:{line:164,column:20},end:{line:164,column:35}},"71":{start:{line:169,column:8},end:{line:188,column:11}},"72":{start:{line:170,column:12},end:{line:187,column:15}},"73":{start:{line:171,column:16},end:{line:177,column:17}},"74":{start:{line:172,column:20},end:{line:172,column:56}},"75":{start:{line:173,column:20},end:{line:176,column:23}},"76":{start:{line:179,column:16},end:{line:184,column:17}},"77":{start:{line:180,column:20},end:{line:183,column:23}},"78":{start:{line:186,column:16},end:{line:186,column:31}},"79":{start:{line:190,column:8},end:{line:190,column:21}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:31},end:{line:192,column:1}},line:27},"1":{name:"(anonymous_1)",decl:{start:{line:28,column:23},end:{line:28,column:24}},loc:{start:{line:28,column:50},end:{line:191,column:5}},line:28},"2":{name:"(anonymous_2)",decl:{start:{line:29,column:33},end:{line:29,column:34}},loc:{start:{line:29,column:53},end:{line:33,column:9}},line:29},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:31},end:{line:30,column:32}},loc:{start:{line:30,column:58},end:{line:32,column:13}},line:30},"4":{name:"(anonymous_4)",decl:{start:{line:35,column:39},end:{line:35,column:40}},loc:{start:{line:35,column:59},end:{line:107,column:9}},line:35},"5":{name:"(anonymous_5)",decl:{start:{line:86,column:168},end:{line:86,column:169}},loc:{start:{line:86,column:189},end:{line:106,column:13}},line:86},"6":{name:"(anonymous_6)",decl:{start:{line:95,column:76},end:{line:95,column:77}},loc:{start:{line:95,column:103},end:{line:105,column:17}},line:95},"7":{name:"(anonymous_7)",decl:{start:{line:109,column:26},end:{line:109,column:27}},loc:{start:{line:109,column:46},end:{line:167,column:9}},line:109},"8":{name:"(anonymous_8)",decl:{start:{line:120,column:23},end:{line:120,column:24}},loc:{start:{line:120,column:49},end:{line:138,column:21}},line:120},"9":{name:"(anonymous_9)",decl:{start:{line:147,column:30},end:{line:147,column:31}},loc:{start:{line:147,column:57},end:{line:165,column:17}},line:147},"10":{name:"(anonymous_10)",decl:{start:{line:169,column:30},end:{line:169,column:31}},loc:{start:{line:169,column:50},end:{line:188,column:9}},line:169},"11":{name:"(anonymous_11)",decl:{start:{line:170,column:74},end:{line:170,column:75}},loc:{start:{line:170,column:100},end:{line:187,column:13}},line:170}},branchMap:{"0":{loc:{start:{line:21,column:0},end:{line:25,column:1}},type:"if",locations:[{start:{line:21,column:0},end:{line:25,column:1}},{start:{line:21,column:0},end:{line:25,column:1}}],line:21},"1":{loc:{start:{line:44,column:12},end:{line:50,column:13}},type:"if",locations:[{start:{line:44,column:12},end:{line:50,column:13}},{start:{line:44,column:12},end:{line:50,column:13}}],line:44},"2":{loc:{start:{line:44,column:16},end:{line:44,column:106}},type:"binary-expr",locations:[{start:{line:44,column:16},end:{line:44,column:35}},{start:{line:44,column:39},end:{line:44,column:57}},{start:{line:44,column:61},end:{line:44,column:82}},{start:{line:44,column:86},end:{line:44,column:106}}],line:44},"3":{loc:{start:{line:52,column:12},end:{line:58,column:13}},type:"if",locations:[{start:{line:52,column:12},end:{line:58,column:13}},{start:{line:52,column:12},end:{line:58,column:13}}],line:52},"4":{loc:{start:{line:52,column:16},end:{line:52,column:98}},type:"binary-expr",locations:[{start:{line:52,column:16},end:{line:52,column:33}},{start:{line:52,column:37},end:{line:52,column:53}},{start:{line:52,column:57},end:{line:52,column:76}},{start:{line:52,column:80},end:{line:52,column:98}}],line:52},"5":{loc:{start:{line:60,column:12},end:{line:66,column:13}},type:"if",locations:[{start:{line:60,column:12},end:{line:66,column:13}},{start:{line:60,column:12},end:{line:66,column:13}}],line:60},"6":{loc:{start:{line:60,column:16},end:{line:60,column:69}},type:"binary-expr",locations:[{start:{line:60,column:16},end:{line:60,column:45}},{start:{line:60,column:49},end:{line:60,column:69}}],line:60},"7":{loc:{start:{line:68,column:12},end:{line:74,column:13}},type:"if",locations:[{start:{line:68,column:12},end:{line:74,column:13}},{start:{line:68,column:12},end:{line:74,column:13}}],line:68},"8":{loc:{start:{line:68,column:16},end:{line:68,column:71}},type:"binary-expr",locations:[{start:{line:68,column:16},end:{line:68,column:46}},{start:{line:68,column:50},end:{line:68,column:71}}],line:68},"9":{loc:{start:{line:76,column:12},end:{line:82,column:13}},type:"if",locations:[{start:{line:76,column:12},end:{line:82,column:13}},{start:{line:76,column:12},end:{line:82,column:13}}],line:76},"10":{loc:{start:{line:76,column:16},end:{line:76,column:77}},type:"binary-expr",locations:[{start:{line:76,column:16},end:{line:76,column:49}},{start:{line:76,column:53},end:{line:76,column:77}}],line:76},"11":{loc:{start:{line:87,column:16},end:{line:93,column:17}},type:"if",locations:[{start:{line:87,column:16},end:{line:93,column:17}},{start:{line:87,column:16},end:{line:93,column:17}}],line:87},"12":{loc:{start:{line:96,column:20},end:{line:102,column:21}},type:"if",locations:[{start:{line:96,column:20},end:{line:102,column:21}},{start:{line:96,column:20},end:{line:102,column:21}}],line:96},"13":{loc:{start:{line:113,column:12},end:{line:166,column:13}},type:"if",locations:[{start:{line:113,column:12},end:{line:166,column:13}},{start:{line:113,column:12},end:{line:166,column:13}}],line:113},"14":{loc:{start:{line:113,column:15},end:{line:113,column:60}},type:"binary-expr",locations:[{start:{line:113,column:15},end:{line:113,column:32}},{start:{line:113,column:36},end:{line:113,column:60}}],line:113},"15":{loc:{start:{line:114,column:16},end:{line:144,column:17}},type:"if",locations:[{start:{line:114,column:16},end:{line:144,column:17}},{start:{line:114,column:16},end:{line:144,column:17}}],line:114},"16":{loc:{start:{line:114,column:19},end:{line:114,column:48}},type:"binary-expr",locations:[{start:{line:114,column:19},end:{line:114,column:28}},{start:{line:114,column:32},end:{line:114,column:48}}],line:114},"17":{loc:{start:{line:121,column:24},end:{line:128,column:25}},type:"if",locations:[{start:{line:121,column:24},end:{line:128,column:25}},{start:{line:121,column:24},end:{line:128,column:25}}],line:121},"18":{loc:{start:{line:130,column:24},end:{line:135,column:25}},type:"if",locations:[{start:{line:130,column:24},end:{line:135,column:25}},{start:{line:130,column:24},end:{line:135,column:25}}],line:130},"19":{loc:{start:{line:148,column:20},end:{line:155,column:21}},type:"if",locations:[{start:{line:148,column:20},end:{line:155,column:21}},{start:{line:148,column:20},end:{line:155,column:21}}],line:148},"20":{loc:{start:{line:157,column:20},end:{line:162,column:21}},type:"if",locations:[{start:{line:157,column:20},end:{line:162,column:21}},{start:{line:157,column:20},end:{line:162,column:21}}],line:157},"21":{loc:{start:{line:171,column:16},end:{line:177,column:17}},type:"if",locations:[{start:{line:171,column:16},end:{line:177,column:17}},{start:{line:171,column:16},end:{line:177,column:17}}],line:171},"22":{loc:{start:{line:179,column:16},end:{line:184,column:17}},type:"if",locations:[{start:{line:179,column:16},end:{line:184,column:17}},{start:{line:179,column:16},end:{line:184,column:17}}],line:179}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"667043e0f77d672026bec3cc9229c9c0c3f5168c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1cdk7u54rp=function(){return actualCoverage;};}return actualCoverage;}cov_1cdk7u54rp();const express=(cov_1cdk7u54rp().s[0]++,require('express'));const app=(cov_1cdk7u54rp().s[1]++,express());const bodyParser=(cov_1cdk7u54rp().s[2]++,require('body-parser'));const jsonParser=(cov_1cdk7u54rp().s[3]++,bodyParser.json());const winston=(cov_1cdk7u54rp().s[4]++,require('winston'));const logger=(cov_1cdk7u54rp().s[5]++,winston.createLogger({level:'info',format:winston.format.json(),defaultMeta:{service:'user-service'},transports:[new winston.transports.File({filename:'error.log',level:'error'}),new winston.transports.File({filename:'combined.log'})]}));cov_1cdk7u54rp().s[6]++;if(process.env.NODE_ENV!=='production'){cov_1cdk7u54rp().b[0][0]++;cov_1cdk7u54rp().s[7]++;logger.add(new winston.transports.Console({format:winston.format.simple()}));}else{cov_1cdk7u54rp().b[0][1]++;}cov_1cdk7u54rp().s[8]++;module.exports=async db=>{cov_1cdk7u54rp().f[0]++;cov_1cdk7u54rp().s[9]++;return new Promise(async(resolve,reject)=>{cov_1cdk7u54rp().f[1]++;cov_1cdk7u54rp().s[10]++;await app.get('/health',async(req,res)=>{cov_1cdk7u54rp().f[2]++;cov_1cdk7u54rp().s[11]++;return new Promise(async(resolve,reject)=>{cov_1cdk7u54rp().f[3]++;cov_1cdk7u54rp().s[12]++;resolve(res.send('Healthy'));});});cov_1cdk7u54rp().s[13]++;app.post('/rides',jsonParser,async(req,res)=>{cov_1cdk7u54rp().f[4]++;const startLatitude=(cov_1cdk7u54rp().s[14]++,Number(req.body.start_lat));const startLongitude=(cov_1cdk7u54rp().s[15]++,Number(req.body.start_long));const endLatitude=(cov_1cdk7u54rp().s[16]++,Number(req.body.end_lat));const endLongitude=(cov_1cdk7u54rp().s[17]++,Number(req.body.end_long));const riderName=(cov_1cdk7u54rp().s[18]++,req.body.rider_name);const driverName=(cov_1cdk7u54rp().s[19]++,req.body.driver_name);const driverVehicle=(cov_1cdk7u54rp().s[20]++,req.body.driver_vehicle);cov_1cdk7u54rp().s[21]++;if((cov_1cdk7u54rp().b[2][0]++,startLatitude<-90)||(cov_1cdk7u54rp().b[2][1]++,startLatitude>90)||(cov_1cdk7u54rp().b[2][2]++,startLongitude<-180)||(cov_1cdk7u54rp().b[2][3]++,startLongitude>180)){cov_1cdk7u54rp().b[1][0]++;cov_1cdk7u54rp().s[22]++;logger.log('error',new Error('Start latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'));cov_1cdk7u54rp().s[23]++;return res.send({error_code:'VALIDATION_ERROR',message:'Start latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'});}else{cov_1cdk7u54rp().b[1][1]++;}cov_1cdk7u54rp().s[24]++;if((cov_1cdk7u54rp().b[4][0]++,endLatitude<-90)||(cov_1cdk7u54rp().b[4][1]++,endLatitude>90)||(cov_1cdk7u54rp().b[4][2]++,endLongitude<-180)||(cov_1cdk7u54rp().b[4][3]++,endLongitude>180)){cov_1cdk7u54rp().b[3][0]++;cov_1cdk7u54rp().s[25]++;logger.log('error',new Error('End latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'));cov_1cdk7u54rp().s[26]++;return res.send({error_code:'VALIDATION_ERROR',message:'End latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'});}else{cov_1cdk7u54rp().b[3][1]++;}cov_1cdk7u54rp().s[27]++;if((cov_1cdk7u54rp().b[6][0]++,typeof riderName!=='string')||(cov_1cdk7u54rp().b[6][1]++,riderName.length<1)){cov_1cdk7u54rp().b[5][0]++;cov_1cdk7u54rp().s[28]++;logger.log('error',new Error('Rider name must be a non empty string'));cov_1cdk7u54rp().s[29]++;return res.send({error_code:'VALIDATION_ERROR',message:'Rider name must be a non empty string'});}else{cov_1cdk7u54rp().b[5][1]++;}cov_1cdk7u54rp().s[30]++;if((cov_1cdk7u54rp().b[8][0]++,typeof driverName!=='string')||(cov_1cdk7u54rp().b[8][1]++,driverName.length<1)){cov_1cdk7u54rp().b[7][0]++;cov_1cdk7u54rp().s[31]++;logger.log('error',new Error('Rider name must be a non empty string'));cov_1cdk7u54rp().s[32]++;return res.send({error_code:'VALIDATION_ERROR',message:'Rider name must be a non empty string'});}else{cov_1cdk7u54rp().b[7][1]++;}cov_1cdk7u54rp().s[33]++;if((cov_1cdk7u54rp().b[10][0]++,typeof driverVehicle!=='string')||(cov_1cdk7u54rp().b[10][1]++,driverVehicle.length<1)){cov_1cdk7u54rp().b[9][0]++;cov_1cdk7u54rp().s[34]++;logger.log('error',new Error('Rider name must be a non empty string'));cov_1cdk7u54rp().s[35]++;return res.send({error_code:'VALIDATION_ERROR',message:'Rider name must be a non empty string'});}else{cov_1cdk7u54rp().b[9][1]++;}var values=(cov_1cdk7u54rp().s[36]++,[req.body.start_lat,req.body.start_long,req.body.end_lat,req.body.end_long,req.body.rider_name,req.body.driver_name,req.body.driver_vehicle]);const result=(cov_1cdk7u54rp().s[37]++,db.run('INSERT INTO Rides(startLat, startLong, endLat, endLong, riderName, driverName, driverVehicle) VALUES (?, ?, ?, ?, ?, ?, ?)',values,async function(err){cov_1cdk7u54rp().f[5]++;cov_1cdk7u54rp().s[38]++;if(err){cov_1cdk7u54rp().b[11][0]++;cov_1cdk7u54rp().s[39]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[40]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[11][1]++;}cov_1cdk7u54rp().s[41]++;db.all('SELECT * FROM Rides WHERE rideID = ?',this.lastID,async function(err,rows){cov_1cdk7u54rp().f[6]++;cov_1cdk7u54rp().s[42]++;if(err){cov_1cdk7u54rp().b[12][0]++;cov_1cdk7u54rp().s[43]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[44]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[12][1]++;}cov_1cdk7u54rp().s[45]++;res.send(rows);});}));});cov_1cdk7u54rp().s[46]++;app.get('/rides',async(req,res)=>{cov_1cdk7u54rp().f[7]++;let page=(cov_1cdk7u54rp().s[47]++,req.query.page);let row_of_page=(cov_1cdk7u54rp().s[48]++,req.query.row_of_page);let query=(cov_1cdk7u54rp().s[49]++,``);cov_1cdk7u54rp().s[50]++;if((cov_1cdk7u54rp().b[14][0]++,page!=undefined)&&(cov_1cdk7u54rp().b[14][1]++,row_of_page!=undefined)){cov_1cdk7u54rp().b[13][0]++;cov_1cdk7u54rp().s[51]++;if((cov_1cdk7u54rp().b[16][0]++,page>-1)&&(cov_1cdk7u54rp().b[16][1]++,row_of_page>-1)){cov_1cdk7u54rp().b[15][0]++;let offset=(cov_1cdk7u54rp().s[52]++,(page-1)*row_of_page);// query = `SELECT * FROM Rides LIMIT ${row_of_page} OFFSET ${offset};`
cov_1cdk7u54rp().s[53]++;db.all('SELECT * FROM Rides LIMIT ? OFFSET ?',[row_of_page,offset],async function(err,rows){cov_1cdk7u54rp().f[8]++;cov_1cdk7u54rp().s[54]++;if(err){cov_1cdk7u54rp().b[17][0]++;cov_1cdk7u54rp().s[55]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[56]++;console.log(err);cov_1cdk7u54rp().s[57]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[17][1]++;}cov_1cdk7u54rp().s[58]++;if(rows.length===0){cov_1cdk7u54rp().b[18][0]++;cov_1cdk7u54rp().s[59]++;return res.send({error_code:'RIDES_NOT_FOUND_ERROR',message:'Could not find any rides'});}else{cov_1cdk7u54rp().b[18][1]++;}cov_1cdk7u54rp().s[60]++;res.send(rows);});}else{cov_1cdk7u54rp().b[15][1]++;cov_1cdk7u54rp().s[61]++;res.send({error_code:'PAGE AND ROWS ARE NEGATIVE',message:'Could not render negative pages or rows'});}}else{cov_1cdk7u54rp().b[13][1]++;cov_1cdk7u54rp().s[62]++;query=`SELECT * FROM Rides`;cov_1cdk7u54rp().s[63]++;db.all(query,async function(err,rows){cov_1cdk7u54rp().f[9]++;cov_1cdk7u54rp().s[64]++;if(err){cov_1cdk7u54rp().b[19][0]++;cov_1cdk7u54rp().s[65]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[66]++;console.log(err);cov_1cdk7u54rp().s[67]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[19][1]++;}cov_1cdk7u54rp().s[68]++;if(rows.length===0){cov_1cdk7u54rp().b[20][0]++;cov_1cdk7u54rp().s[69]++;return res.send({error_code:'RIDES_NOT_FOUND_ERROR',message:'Could not find any rides'});}else{cov_1cdk7u54rp().b[20][1]++;}cov_1cdk7u54rp().s[70]++;res.send(rows);});}});cov_1cdk7u54rp().s[71]++;app.get('/rides/:id',async(req,res)=>{cov_1cdk7u54rp().f[10]++;cov_1cdk7u54rp().s[72]++;db.all('SELECT * FROM Rides WHERE rideID = ?',req.params.id,async function(err,rows){cov_1cdk7u54rp().f[11]++;cov_1cdk7u54rp().s[73]++;if(err){cov_1cdk7u54rp().b[21][0]++;cov_1cdk7u54rp().s[74]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[75]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[21][1]++;}cov_1cdk7u54rp().s[76]++;if(rows.length===0){cov_1cdk7u54rp().b[22][0]++;cov_1cdk7u54rp().s[77]++;return res.send({error_code:'RIDES_NOT_FOUND_ERROR',message:'Could not find any rides'});}else{cov_1cdk7u54rp().b[22][1]++;}cov_1cdk7u54rp().s[78]++;res.send(rows);});});cov_1cdk7u54rp().s[79]++;resolve(app);});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImJvZHlQYXJzZXIiLCJqc29uUGFyc2VyIiwianNvbiIsIndpbnN0b24iLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsImZvcm1hdCIsImRlZmF1bHRNZXRhIiwic2VydmljZSIsInRyYW5zcG9ydHMiLCJGaWxlIiwiZmlsZW5hbWUiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJhZGQiLCJDb25zb2xlIiwic2ltcGxlIiwibW9kdWxlIiwiZXhwb3J0cyIsImRiIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kIiwicG9zdCIsInN0YXJ0TGF0aXR1ZGUiLCJOdW1iZXIiLCJib2R5Iiwic3RhcnRfbGF0Iiwic3RhcnRMb25naXR1ZGUiLCJzdGFydF9sb25nIiwiZW5kTGF0aXR1ZGUiLCJlbmRfbGF0IiwiZW5kTG9uZ2l0dWRlIiwiZW5kX2xvbmciLCJyaWRlck5hbWUiLCJyaWRlcl9uYW1lIiwiZHJpdmVyTmFtZSIsImRyaXZlcl9uYW1lIiwiZHJpdmVyVmVoaWNsZSIsImRyaXZlcl92ZWhpY2xlIiwibG9nIiwiRXJyb3IiLCJlcnJvcl9jb2RlIiwibWVzc2FnZSIsImxlbmd0aCIsInZhbHVlcyIsInJlc3VsdCIsInJ1biIsImVyciIsImFsbCIsImxhc3RJRCIsInJvd3MiLCJwYWdlIiwicXVlcnkiLCJyb3dfb2ZfcGFnZSIsInVuZGVmaW5lZCIsIm9mZnNldCIsImNvbnNvbGUiLCJwYXJhbXMiLCJpZCJdLCJtYXBwaW5ncyI6IkFBQUEsYSx5K1lBZVk7MkZBYlosS0FBTUEsQ0FBQUEsT0FBTywwQkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFiLENBQ0EsS0FBTUMsQ0FBQUEsR0FBRywwQkFBR0YsT0FBTyxFQUFWLENBQVQsQ0FFQSxLQUFNRyxDQUFBQSxVQUFVLDBCQUFHRixPQUFPLENBQUMsYUFBRCxDQUFW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U3BGLEdBQUlRLElBQUksQ0FBQ1AsTUFBTCxHQUFnQixDQUFwQixDQUF1QixzREFDbkIsTUFBT3ZCLENBQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLENBQ1pvQixVQUFVLENBQUUsdUJBREEsQ0FFWkMsT0FBTyxDQUFFLDBCQUZHLENBQVQsQ0FBUCxDQUlILENBTEQsa0NBVG9GLHlCQWdCcEZ0QixHQUFHLENBQUNDLElBQUosQ0FBUzZCLElBQVQsRUFDSCxDQWpCRCxFQWtCSCxDQW5CRCxFQTdJMEMseUJBa0sxQ2xDLE9BQU8sQ0FBQ3hCLEdBQUQsQ0FBUCxDQUNILENBbktNLENBQVAsQ0FvS0gsQ0FyS0QiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xuY29uc3QganNvblBhcnNlciA9IGJvZHlQYXJzZXIuanNvbigpO1xuXG5jb25zdCB3aW5zdG9uID0gcmVxdWlyZSgnd2luc3RvbicpO1xuXG5jb25zdCBsb2dnZXIgPSB3aW5zdG9uLmNyZWF0ZUxvZ2dlcih7XG4gICAgbGV2ZWw6ICdpbmZvJyxcbiAgICBmb3JtYXQ6IHdpbnN0b24uZm9ybWF0Lmpzb24oKSxcbiAgICBkZWZhdWx0TWV0YTogeyBzZXJ2aWNlOiAndXNlci1zZXJ2aWNlJyB9LFxuICAgIHRyYW5zcG9ydHM6IFtcbiAgICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7IGZpbGVuYW1lOiAnZXJyb3IubG9nJywgbGV2ZWw6ICdlcnJvcicgfSksXG4gICAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2NvbWJpbmVkLmxvZycgfSksXG4gICAgXSxcbn0pO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGxvZ2dlci5hZGQobmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKHtcbiAgICAgIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuc2ltcGxlKCksXG4gICAgfSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChkYikgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGF3YWl0IGFwcC5nZXQoJy9oZWFsdGgnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMuc2VuZCgnSGVhbHRoeScpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcblxuICAgICAgICBhcHAucG9zdCgnL3JpZGVzJywganNvblBhcnNlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGFydExhdGl0dWRlID0gTnVtYmVyKHJlcS5ib2R5LnN0YXJ0X2xhdCk7XG4gICAgICAgICAgICBjb25zdCBzdGFydExvbmdpdHVkZSA9IE51bWJlcihyZXEuYm9keS5zdGFydF9sb25nKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZExhdGl0dWRlID0gTnVtYmVyKHJlcS5ib2R5LmVuZF9sYXQpO1xuICAgICAgICAgICAgY29uc3QgZW5kTG9uZ2l0dWRlID0gTnVtYmVyKHJlcS5ib2R5LmVuZF9sb25nKTtcbiAgICAgICAgICAgIGNvbnN0IHJpZGVyTmFtZSA9IHJlcS5ib2R5LnJpZGVyX25hbWU7XG4gICAgICAgICAgICBjb25zdCBkcml2ZXJOYW1lID0gcmVxLmJvZHkuZHJpdmVyX25hbWU7XG4gICAgICAgICAgICBjb25zdCBkcml2ZXJWZWhpY2xlID0gcmVxLmJvZHkuZHJpdmVyX3ZlaGljbGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzdGFydExhdGl0dWRlIDwgLTkwIHx8IHN0YXJ0TGF0aXR1ZGUgPiA5MCB8fCBzdGFydExvbmdpdHVkZSA8IC0xODAgfHwgc3RhcnRMb25naXR1ZGUgPiAxODApIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcignU3RhcnQgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSBtdXN0IGJlIGJldHdlZW4gLTkwIC0gOTAgYW5kIC0xODAgdG8gMTgwIGRlZ3JlZXMgcmVzcGVjdGl2ZWx5JykpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1N0YXJ0IGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgbXVzdCBiZSBiZXR3ZWVuIC05MCAtIDkwIGFuZCAtMTgwIHRvIDE4MCBkZWdyZWVzIHJlc3BlY3RpdmVseSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVuZExhdGl0dWRlIDwgLTkwIHx8IGVuZExhdGl0dWRlID4gOTAgfHwgZW5kTG9uZ2l0dWRlIDwgLTE4MCB8fCBlbmRMb25naXR1ZGUgPiAxODApIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcignRW5kIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgbXVzdCBiZSBiZXR3ZWVuIC05MCAtIDkwIGFuZCAtMTgwIHRvIDE4MCBkZWdyZWVzIHJlc3BlY3RpdmVseScpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFbmQgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSBtdXN0IGJlIGJldHdlZW4gLTkwIC0gOTAgYW5kIC0xODAgdG8gMTgwIGRlZ3JlZXMgcmVzcGVjdGl2ZWx5J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJpZGVyTmFtZSAhPT0gJ3N0cmluZycgfHwgcmlkZXJOYW1lLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcignUmlkZXIgbmFtZSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZycpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdSaWRlciBuYW1lIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRyaXZlck5hbWUgIT09ICdzdHJpbmcnIHx8IGRyaXZlck5hbWUubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coJ2Vycm9yJywgbmV3IEVycm9yKCdSaWRlciBuYW1lIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nJykpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1JpZGVyIG5hbWUgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgZHJpdmVyVmVoaWNsZSAhPT0gJ3N0cmluZycgfHwgZHJpdmVyVmVoaWNsZS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoJ1JpZGVyIG5hbWUgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcnKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUmlkZXIgbmFtZSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtyZXEuYm9keS5zdGFydF9sYXQsIHJlcS5ib2R5LnN0YXJ0X2xvbmcsIHJlcS5ib2R5LmVuZF9sYXQsIHJlcS5ib2R5LmVuZF9sb25nLCByZXEuYm9keS5yaWRlcl9uYW1lLCByZXEuYm9keS5kcml2ZXJfbmFtZSwgcmVxLmJvZHkuZHJpdmVyX3ZlaGljbGVdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBkYi5ydW4oJ0lOU0VSVCBJTlRPIFJpZGVzKHN0YXJ0TGF0LCBzdGFydExvbmcsIGVuZExhdCwgZW5kTG9uZywgcmlkZXJOYW1lLCBkcml2ZXJOYW1lLCBkcml2ZXJWZWhpY2xlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8pJywgdmFsdWVzLCBhc3luYyBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcihlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdTRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRiLmFsbCgnU0VMRUNUICogRlJPTSBSaWRlcyBXSEVSRSByaWRlSUQgPSA/JywgdGhpcy5sYXN0SUQsIGFzeW5jIGZ1bmN0aW9uIChlcnIsIHJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdTRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZChyb3dzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBhcHAuZ2V0KCcvcmlkZXMnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgIGxldCBwYWdlID0gcmVxLnF1ZXJ5LnBhZ2U7XG4gICAgICAgICAgICBsZXQgcm93X29mX3BhZ2UgPSAgcmVxLnF1ZXJ5LnJvd19vZl9wYWdlO1xuICAgICAgICAgICAgbGV0IHF1ZXJ5ID0gYGA7XG4gICAgICAgICAgICBpZihwYWdlICE9IHVuZGVmaW5lZCAmJiByb3dfb2ZfcGFnZSAhPSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIGlmKHBhZ2UgPiAtMSAmJiByb3dfb2ZfcGFnZSA+IC0xKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9mZnNldCA9IChwYWdlLTEpKnJvd19vZl9wYWdlO1xuICAgICAgICAgICAgICAgICAgICAvLyBxdWVyeSA9IGBTRUxFQ1QgKiBGUk9NIFJpZGVzIExJTUlUICR7cm93X29mX3BhZ2V9IE9GRlNFVCAke29mZnNldH07YFxuICAgICAgICAgICAgICAgICAgICBkYi5hbGwoJ1NFTEVDVCAqIEZST00gUmlkZXMgTElNSVQgPyBPRkZTRVQgPycsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd19vZl9wYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgIF0sIGFzeW5jIGZ1bmN0aW9uIChlcnIsIHJvd3Mpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coJ2Vycm9yJywgbmV3IEVycm9yKGVycikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1JJREVTX05PVF9GT1VORF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb3VsZCBub3QgZmluZCBhbnkgcmlkZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQocm93cyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnUEFHRSBBTkQgUk9XUyBBUkUgTkVHQVRJVkUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCByZW5kZXIgbmVnYXRpdmUgcGFnZXMgb3Igcm93cydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgcXVlcnkgPSBgU0VMRUNUICogRlJPTSBSaWRlc2BcbiAgICAgICAgICAgICAgICBkYi5hbGwocXVlcnksIGFzeW5jIGZ1bmN0aW9uIChlcnIsIHJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdTRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1JJREVTX05PVF9GT1VORF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCBmaW5kIGFueSByaWRlcydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQocm93cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFwcC5nZXQoJy9yaWRlcy86aWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgIGRiLmFsbCgnU0VMRUNUICogRlJPTSBSaWRlcyBXSEVSRSByaWRlSUQgPSA/JywgcmVxLnBhcmFtcy5pZCwgYXN5bmMgZnVuY3Rpb24gKGVyciwgcm93cyl7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcihlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdTRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1JJREVTX05PVF9GT1VORF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGZpbmQgYW55IHJpZGVzJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXMuc2VuZChyb3dzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXNvbHZlKGFwcCk7XG4gICAgfSlcbn07XG4iXX0=