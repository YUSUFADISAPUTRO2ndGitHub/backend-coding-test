'use strict';function cov_1cdk7u54rp(){var path="C:\\Users\\Asus\\OneDrive\\Desktop\\backend-coding-test\\src\\app.js";var hash="76f593e007a98f1f5d942a8b237a9c4b8826acd3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Asus\\OneDrive\\Desktop\\backend-coding-test\\src\\app.js",statementMap:{"0":{start:{line:3,column:16},end:{line:3,column:34}},"1":{start:{line:4,column:12},end:{line:4,column:21}},"2":{start:{line:6,column:19},end:{line:6,column:41}},"3":{start:{line:7,column:19},end:{line:7,column:36}},"4":{start:{line:9,column:16},end:{line:9,column:34}},"5":{start:{line:11,column:15},end:{line:19,column:2}},"6":{start:{line:21,column:0},end:{line:25,column:1}},"7":{start:{line:22,column:4},end:{line:24,column:8}},"8":{start:{line:27,column:0},end:{line:190,column:2}},"9":{start:{line:28,column:4},end:{line:189,column:6}},"10":{start:{line:29,column:8},end:{line:31,column:10}},"11":{start:{line:30,column:16},end:{line:30,column:44}},"12":{start:{line:33,column:8},end:{line:105,column:11}},"13":{start:{line:34,column:34},end:{line:34,column:60}},"14":{start:{line:35,column:35},end:{line:35,column:62}},"15":{start:{line:36,column:32},end:{line:36,column:56}},"16":{start:{line:37,column:33},end:{line:37,column:58}},"17":{start:{line:38,column:30},end:{line:38,column:49}},"18":{start:{line:39,column:31},end:{line:39,column:51}},"19":{start:{line:40,column:34},end:{line:40,column:57}},"20":{start:{line:42,column:12},end:{line:48,column:13}},"21":{start:{line:43,column:16},end:{line:43,column:141}},"22":{start:{line:44,column:16},end:{line:47,column:19}},"23":{start:{line:50,column:12},end:{line:56,column:13}},"24":{start:{line:51,column:16},end:{line:51,column:139}},"25":{start:{line:52,column:16},end:{line:55,column:19}},"26":{start:{line:58,column:12},end:{line:64,column:13}},"27":{start:{line:59,column:16},end:{line:59,column:88}},"28":{start:{line:60,column:16},end:{line:63,column:19}},"29":{start:{line:66,column:12},end:{line:72,column:13}},"30":{start:{line:67,column:16},end:{line:67,column:88}},"31":{start:{line:68,column:16},end:{line:71,column:19}},"32":{start:{line:74,column:12},end:{line:80,column:13}},"33":{start:{line:75,column:16},end:{line:75,column:88}},"34":{start:{line:76,column:16},end:{line:79,column:19}},"35":{start:{line:82,column:25},end:{line:82,column:171}},"36":{start:{line:84,column:27},end:{line:104,column:14}},"37":{start:{line:85,column:16},end:{line:91,column:17}},"38":{start:{line:86,column:20},end:{line:86,column:56}},"39":{start:{line:87,column:20},end:{line:90,column:23}},"40":{start:{line:93,column:16},end:{line:103,column:19}},"41":{start:{line:94,column:20},end:{line:100,column:21}},"42":{start:{line:95,column:24},end:{line:95,column:60}},"43":{start:{line:96,column:24},end:{line:99,column:27}},"44":{start:{line:102,column:20},end:{line:102,column:35}},"45":{start:{line:107,column:8},end:{line:165,column:11}},"46":{start:{line:108,column:23},end:{line:108,column:37}},"47":{start:{line:109,column:31},end:{line:109,column:52}},"48":{start:{line:110,column:24},end:{line:110,column:26}},"49":{start:{line:111,column:12},end:{line:164,column:13}},"50":{start:{line:112,column:16},end:{line:142,column:17}},"51":{start:{line:113,column:33},end:{line:113,column:53}},"52":{start:{line:115,column:20},end:{line:136,column:23}},"53":{start:{line:119,column:24},end:{line:126,column:25}},"54":{start:{line:120,column:28},end:{line:120,column:64}},"55":{start:{line:121,column:28},end:{line:121,column:44}},"56":{start:{line:122,column:28},end:{line:125,column:31}},"57":{start:{line:128,column:24},end:{line:133,column:25}},"58":{start:{line:129,column:28},end:{line:132,column:31}},"59":{start:{line:135,column:24},end:{line:135,column:39}},"60":{start:{line:138,column:20},end:{line:141,column:23}},"61":{start:{line:144,column:16},end:{line:144,column:45}},"62":{start:{line:145,column:16},end:{line:163,column:19}},"63":{start:{line:146,column:20},end:{line:153,column:21}},"64":{start:{line:147,column:24},end:{line:147,column:60}},"65":{start:{line:148,column:24},end:{line:148,column:40}},"66":{start:{line:149,column:24},end:{line:152,column:27}},"67":{start:{line:155,column:20},end:{line:160,column:21}},"68":{start:{line:156,column:24},end:{line:159,column:27}},"69":{start:{line:162,column:20},end:{line:162,column:35}},"70":{start:{line:167,column:8},end:{line:186,column:11}},"71":{start:{line:168,column:12},end:{line:185,column:15}},"72":{start:{line:169,column:16},end:{line:175,column:17}},"73":{start:{line:170,column:20},end:{line:170,column:56}},"74":{start:{line:171,column:20},end:{line:174,column:23}},"75":{start:{line:177,column:16},end:{line:182,column:17}},"76":{start:{line:178,column:20},end:{line:181,column:23}},"77":{start:{line:184,column:16},end:{line:184,column:31}},"78":{start:{line:188,column:8},end:{line:188,column:21}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:31},end:{line:190,column:1}},line:27},"1":{name:"(anonymous_1)",decl:{start:{line:28,column:23},end:{line:28,column:24}},loc:{start:{line:28,column:50},end:{line:189,column:5}},line:28},"2":{name:"(anonymous_2)",decl:{start:{line:29,column:33},end:{line:29,column:34}},loc:{start:{line:29,column:53},end:{line:31,column:9}},line:29},"3":{name:"(anonymous_3)",decl:{start:{line:33,column:39},end:{line:33,column:40}},loc:{start:{line:33,column:59},end:{line:105,column:9}},line:33},"4":{name:"(anonymous_4)",decl:{start:{line:84,column:168},end:{line:84,column:169}},loc:{start:{line:84,column:189},end:{line:104,column:13}},line:84},"5":{name:"(anonymous_5)",decl:{start:{line:93,column:76},end:{line:93,column:77}},loc:{start:{line:93,column:103},end:{line:103,column:17}},line:93},"6":{name:"(anonymous_6)",decl:{start:{line:107,column:26},end:{line:107,column:27}},loc:{start:{line:107,column:46},end:{line:165,column:9}},line:107},"7":{name:"(anonymous_7)",decl:{start:{line:118,column:23},end:{line:118,column:24}},loc:{start:{line:118,column:49},end:{line:136,column:21}},line:118},"8":{name:"(anonymous_8)",decl:{start:{line:145,column:30},end:{line:145,column:31}},loc:{start:{line:145,column:57},end:{line:163,column:17}},line:145},"9":{name:"(anonymous_9)",decl:{start:{line:167,column:30},end:{line:167,column:31}},loc:{start:{line:167,column:50},end:{line:186,column:9}},line:167},"10":{name:"(anonymous_10)",decl:{start:{line:168,column:74},end:{line:168,column:75}},loc:{start:{line:168,column:100},end:{line:185,column:13}},line:168}},branchMap:{"0":{loc:{start:{line:21,column:0},end:{line:25,column:1}},type:"if",locations:[{start:{line:21,column:0},end:{line:25,column:1}},{start:{line:21,column:0},end:{line:25,column:1}}],line:21},"1":{loc:{start:{line:42,column:12},end:{line:48,column:13}},type:"if",locations:[{start:{line:42,column:12},end:{line:48,column:13}},{start:{line:42,column:12},end:{line:48,column:13}}],line:42},"2":{loc:{start:{line:42,column:16},end:{line:42,column:106}},type:"binary-expr",locations:[{start:{line:42,column:16},end:{line:42,column:35}},{start:{line:42,column:39},end:{line:42,column:57}},{start:{line:42,column:61},end:{line:42,column:82}},{start:{line:42,column:86},end:{line:42,column:106}}],line:42},"3":{loc:{start:{line:50,column:12},end:{line:56,column:13}},type:"if",locations:[{start:{line:50,column:12},end:{line:56,column:13}},{start:{line:50,column:12},end:{line:56,column:13}}],line:50},"4":{loc:{start:{line:50,column:16},end:{line:50,column:98}},type:"binary-expr",locations:[{start:{line:50,column:16},end:{line:50,column:33}},{start:{line:50,column:37},end:{line:50,column:53}},{start:{line:50,column:57},end:{line:50,column:76}},{start:{line:50,column:80},end:{line:50,column:98}}],line:50},"5":{loc:{start:{line:58,column:12},end:{line:64,column:13}},type:"if",locations:[{start:{line:58,column:12},end:{line:64,column:13}},{start:{line:58,column:12},end:{line:64,column:13}}],line:58},"6":{loc:{start:{line:58,column:16},end:{line:58,column:69}},type:"binary-expr",locations:[{start:{line:58,column:16},end:{line:58,column:45}},{start:{line:58,column:49},end:{line:58,column:69}}],line:58},"7":{loc:{start:{line:66,column:12},end:{line:72,column:13}},type:"if",locations:[{start:{line:66,column:12},end:{line:72,column:13}},{start:{line:66,column:12},end:{line:72,column:13}}],line:66},"8":{loc:{start:{line:66,column:16},end:{line:66,column:71}},type:"binary-expr",locations:[{start:{line:66,column:16},end:{line:66,column:46}},{start:{line:66,column:50},end:{line:66,column:71}}],line:66},"9":{loc:{start:{line:74,column:12},end:{line:80,column:13}},type:"if",locations:[{start:{line:74,column:12},end:{line:80,column:13}},{start:{line:74,column:12},end:{line:80,column:13}}],line:74},"10":{loc:{start:{line:74,column:16},end:{line:74,column:77}},type:"binary-expr",locations:[{start:{line:74,column:16},end:{line:74,column:49}},{start:{line:74,column:53},end:{line:74,column:77}}],line:74},"11":{loc:{start:{line:85,column:16},end:{line:91,column:17}},type:"if",locations:[{start:{line:85,column:16},end:{line:91,column:17}},{start:{line:85,column:16},end:{line:91,column:17}}],line:85},"12":{loc:{start:{line:94,column:20},end:{line:100,column:21}},type:"if",locations:[{start:{line:94,column:20},end:{line:100,column:21}},{start:{line:94,column:20},end:{line:100,column:21}}],line:94},"13":{loc:{start:{line:111,column:12},end:{line:164,column:13}},type:"if",locations:[{start:{line:111,column:12},end:{line:164,column:13}},{start:{line:111,column:12},end:{line:164,column:13}}],line:111},"14":{loc:{start:{line:111,column:15},end:{line:111,column:60}},type:"binary-expr",locations:[{start:{line:111,column:15},end:{line:111,column:32}},{start:{line:111,column:36},end:{line:111,column:60}}],line:111},"15":{loc:{start:{line:112,column:16},end:{line:142,column:17}},type:"if",locations:[{start:{line:112,column:16},end:{line:142,column:17}},{start:{line:112,column:16},end:{line:142,column:17}}],line:112},"16":{loc:{start:{line:112,column:19},end:{line:112,column:48}},type:"binary-expr",locations:[{start:{line:112,column:19},end:{line:112,column:28}},{start:{line:112,column:32},end:{line:112,column:48}}],line:112},"17":{loc:{start:{line:119,column:24},end:{line:126,column:25}},type:"if",locations:[{start:{line:119,column:24},end:{line:126,column:25}},{start:{line:119,column:24},end:{line:126,column:25}}],line:119},"18":{loc:{start:{line:128,column:24},end:{line:133,column:25}},type:"if",locations:[{start:{line:128,column:24},end:{line:133,column:25}},{start:{line:128,column:24},end:{line:133,column:25}}],line:128},"19":{loc:{start:{line:146,column:20},end:{line:153,column:21}},type:"if",locations:[{start:{line:146,column:20},end:{line:153,column:21}},{start:{line:146,column:20},end:{line:153,column:21}}],line:146},"20":{loc:{start:{line:155,column:20},end:{line:160,column:21}},type:"if",locations:[{start:{line:155,column:20},end:{line:160,column:21}},{start:{line:155,column:20},end:{line:160,column:21}}],line:155},"21":{loc:{start:{line:169,column:16},end:{line:175,column:17}},type:"if",locations:[{start:{line:169,column:16},end:{line:175,column:17}},{start:{line:169,column:16},end:{line:175,column:17}}],line:169},"22":{loc:{start:{line:177,column:16},end:{line:182,column:17}},type:"if",locations:[{start:{line:177,column:16},end:{line:182,column:17}},{start:{line:177,column:16},end:{line:182,column:17}}],line:177}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"76f593e007a98f1f5d942a8b237a9c4b8826acd3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1cdk7u54rp=function(){return actualCoverage;};}return actualCoverage;}cov_1cdk7u54rp();const express=(cov_1cdk7u54rp().s[0]++,require('express'));const app=(cov_1cdk7u54rp().s[1]++,express());const bodyParser=(cov_1cdk7u54rp().s[2]++,require('body-parser'));const jsonParser=(cov_1cdk7u54rp().s[3]++,bodyParser.json());const winston=(cov_1cdk7u54rp().s[4]++,require('winston'));const logger=(cov_1cdk7u54rp().s[5]++,winston.createLogger({level:'info',format:winston.format.json(),defaultMeta:{service:'user-service'},transports:[new winston.transports.File({filename:'error.log',level:'error'}),new winston.transports.File({filename:'combined.log'})]}));cov_1cdk7u54rp().s[6]++;if(process.env.NODE_ENV!=='production'){cov_1cdk7u54rp().b[0][0]++;cov_1cdk7u54rp().s[7]++;logger.add(new winston.transports.Console({format:winston.format.simple()}));}else{cov_1cdk7u54rp().b[0][1]++;}cov_1cdk7u54rp().s[8]++;module.exports=async db=>{cov_1cdk7u54rp().f[0]++;cov_1cdk7u54rp().s[9]++;return new Promise(async(resolve,reject)=>{cov_1cdk7u54rp().f[1]++;cov_1cdk7u54rp().s[10]++;await app.get('/health',async(req,res)=>{cov_1cdk7u54rp().f[2]++;cov_1cdk7u54rp().s[11]++;resolve(res.send('Healthy'));});cov_1cdk7u54rp().s[12]++;app.post('/rides',jsonParser,async(req,res)=>{cov_1cdk7u54rp().f[3]++;const startLatitude=(cov_1cdk7u54rp().s[13]++,Number(req.body.start_lat));const startLongitude=(cov_1cdk7u54rp().s[14]++,Number(req.body.start_long));const endLatitude=(cov_1cdk7u54rp().s[15]++,Number(req.body.end_lat));const endLongitude=(cov_1cdk7u54rp().s[16]++,Number(req.body.end_long));const riderName=(cov_1cdk7u54rp().s[17]++,req.body.rider_name);const driverName=(cov_1cdk7u54rp().s[18]++,req.body.driver_name);const driverVehicle=(cov_1cdk7u54rp().s[19]++,req.body.driver_vehicle);cov_1cdk7u54rp().s[20]++;if((cov_1cdk7u54rp().b[2][0]++,startLatitude<-90)||(cov_1cdk7u54rp().b[2][1]++,startLatitude>90)||(cov_1cdk7u54rp().b[2][2]++,startLongitude<-180)||(cov_1cdk7u54rp().b[2][3]++,startLongitude>180)){cov_1cdk7u54rp().b[1][0]++;cov_1cdk7u54rp().s[21]++;logger.log('error',new Error('Start latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'));cov_1cdk7u54rp().s[22]++;return res.send({error_code:'VALIDATION_ERROR',message:'Start latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'});}else{cov_1cdk7u54rp().b[1][1]++;}cov_1cdk7u54rp().s[23]++;if((cov_1cdk7u54rp().b[4][0]++,endLatitude<-90)||(cov_1cdk7u54rp().b[4][1]++,endLatitude>90)||(cov_1cdk7u54rp().b[4][2]++,endLongitude<-180)||(cov_1cdk7u54rp().b[4][3]++,endLongitude>180)){cov_1cdk7u54rp().b[3][0]++;cov_1cdk7u54rp().s[24]++;logger.log('error',new Error('End latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'));cov_1cdk7u54rp().s[25]++;return res.send({error_code:'VALIDATION_ERROR',message:'End latitude and longitude must be between -90 - 90 and -180 to 180 degrees respectively'});}else{cov_1cdk7u54rp().b[3][1]++;}cov_1cdk7u54rp().s[26]++;if((cov_1cdk7u54rp().b[6][0]++,typeof riderName!=='string')||(cov_1cdk7u54rp().b[6][1]++,riderName.length<1)){cov_1cdk7u54rp().b[5][0]++;cov_1cdk7u54rp().s[27]++;logger.log('error',new Error('Rider name must be a non empty string'));cov_1cdk7u54rp().s[28]++;return res.send({error_code:'VALIDATION_ERROR',message:'Rider name must be a non empty string'});}else{cov_1cdk7u54rp().b[5][1]++;}cov_1cdk7u54rp().s[29]++;if((cov_1cdk7u54rp().b[8][0]++,typeof driverName!=='string')||(cov_1cdk7u54rp().b[8][1]++,driverName.length<1)){cov_1cdk7u54rp().b[7][0]++;cov_1cdk7u54rp().s[30]++;logger.log('error',new Error('Rider name must be a non empty string'));cov_1cdk7u54rp().s[31]++;return res.send({error_code:'VALIDATION_ERROR',message:'Rider name must be a non empty string'});}else{cov_1cdk7u54rp().b[7][1]++;}cov_1cdk7u54rp().s[32]++;if((cov_1cdk7u54rp().b[10][0]++,typeof driverVehicle!=='string')||(cov_1cdk7u54rp().b[10][1]++,driverVehicle.length<1)){cov_1cdk7u54rp().b[9][0]++;cov_1cdk7u54rp().s[33]++;logger.log('error',new Error('Rider name must be a non empty string'));cov_1cdk7u54rp().s[34]++;return res.send({error_code:'VALIDATION_ERROR',message:'Rider name must be a non empty string'});}else{cov_1cdk7u54rp().b[9][1]++;}var values=(cov_1cdk7u54rp().s[35]++,[req.body.start_lat,req.body.start_long,req.body.end_lat,req.body.end_long,req.body.rider_name,req.body.driver_name,req.body.driver_vehicle]);const result=(cov_1cdk7u54rp().s[36]++,db.run('INSERT INTO Rides(startLat, startLong, endLat, endLong, riderName, driverName, driverVehicle) VALUES (?, ?, ?, ?, ?, ?, ?)',values,async function(err){cov_1cdk7u54rp().f[4]++;cov_1cdk7u54rp().s[37]++;if(err){cov_1cdk7u54rp().b[11][0]++;cov_1cdk7u54rp().s[38]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[39]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[11][1]++;}cov_1cdk7u54rp().s[40]++;db.all('SELECT * FROM Rides WHERE rideID = ?',this.lastID,async function(err,rows){cov_1cdk7u54rp().f[5]++;cov_1cdk7u54rp().s[41]++;if(err){cov_1cdk7u54rp().b[12][0]++;cov_1cdk7u54rp().s[42]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[43]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[12][1]++;}cov_1cdk7u54rp().s[44]++;res.send(rows);});}));});cov_1cdk7u54rp().s[45]++;app.get('/rides',async(req,res)=>{cov_1cdk7u54rp().f[6]++;let page=(cov_1cdk7u54rp().s[46]++,req.query.page);let row_of_page=(cov_1cdk7u54rp().s[47]++,req.query.row_of_page);let query=(cov_1cdk7u54rp().s[48]++,``);cov_1cdk7u54rp().s[49]++;if((cov_1cdk7u54rp().b[14][0]++,page!=undefined)&&(cov_1cdk7u54rp().b[14][1]++,row_of_page!=undefined)){cov_1cdk7u54rp().b[13][0]++;cov_1cdk7u54rp().s[50]++;if((cov_1cdk7u54rp().b[16][0]++,page>-1)&&(cov_1cdk7u54rp().b[16][1]++,row_of_page>-1)){cov_1cdk7u54rp().b[15][0]++;let offset=(cov_1cdk7u54rp().s[51]++,(page-1)*row_of_page);// query = `SELECT * FROM Rides LIMIT ${row_of_page} OFFSET ${offset};`
cov_1cdk7u54rp().s[52]++;db.all('SELECT * FROM Rides LIMIT ? OFFSET ?',[row_of_page,offset],async function(err,rows){cov_1cdk7u54rp().f[7]++;cov_1cdk7u54rp().s[53]++;if(err){cov_1cdk7u54rp().b[17][0]++;cov_1cdk7u54rp().s[54]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[55]++;console.log(err);cov_1cdk7u54rp().s[56]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[17][1]++;}cov_1cdk7u54rp().s[57]++;if(rows.length===0){cov_1cdk7u54rp().b[18][0]++;cov_1cdk7u54rp().s[58]++;return res.send({error_code:'RIDES_NOT_FOUND_ERROR',message:'Could not find any rides'});}else{cov_1cdk7u54rp().b[18][1]++;}cov_1cdk7u54rp().s[59]++;res.send(rows);});}else{cov_1cdk7u54rp().b[15][1]++;cov_1cdk7u54rp().s[60]++;res.send({error_code:'PAGE AND ROWS ARE NEGATIVE',message:'Could not render negative pages or rows'});}}else{cov_1cdk7u54rp().b[13][1]++;cov_1cdk7u54rp().s[61]++;query=`SELECT * FROM Rides`;cov_1cdk7u54rp().s[62]++;db.all(query,async function(err,rows){cov_1cdk7u54rp().f[8]++;cov_1cdk7u54rp().s[63]++;if(err){cov_1cdk7u54rp().b[19][0]++;cov_1cdk7u54rp().s[64]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[65]++;console.log(err);cov_1cdk7u54rp().s[66]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[19][1]++;}cov_1cdk7u54rp().s[67]++;if(rows.length===0){cov_1cdk7u54rp().b[20][0]++;cov_1cdk7u54rp().s[68]++;return res.send({error_code:'RIDES_NOT_FOUND_ERROR',message:'Could not find any rides'});}else{cov_1cdk7u54rp().b[20][1]++;}cov_1cdk7u54rp().s[69]++;res.send(rows);});}});cov_1cdk7u54rp().s[70]++;app.get('/rides/:id',async(req,res)=>{cov_1cdk7u54rp().f[9]++;cov_1cdk7u54rp().s[71]++;db.all('SELECT * FROM Rides WHERE rideID = ?',req.params.id,async function(err,rows){cov_1cdk7u54rp().f[10]++;cov_1cdk7u54rp().s[72]++;if(err){cov_1cdk7u54rp().b[21][0]++;cov_1cdk7u54rp().s[73]++;logger.log('error',new Error(err));cov_1cdk7u54rp().s[74]++;return res.send({error_code:'SERVER_ERROR',message:'Unknown error'});}else{cov_1cdk7u54rp().b[21][1]++;}cov_1cdk7u54rp().s[75]++;if(rows.length===0){cov_1cdk7u54rp().b[22][0]++;cov_1cdk7u54rp().s[76]++;return res.send({error_code:'RIDES_NOT_FOUND_ERROR',message:'Could not find any rides'});}else{cov_1cdk7u54rp().b[22][1]++;}cov_1cdk7u54rp().s[77]++;res.send(rows);});});cov_1cdk7u54rp().s[78]++;resolve(app);});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImJvZHlQYXJzZXIiLCJqc29uUGFyc2VyIiwianNvbiIsIndpbnN0b24iLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsImZvcm1hdCIsImRlZmF1bHRNZXRhIiwic2VydmljZSIsInRyYW5zcG9ydHMiLCJGaWxlIiwiZmlsZW5hbWUiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJhZGQiLCJDb25zb2xlIiwic2ltcGxlIiwibW9kdWxlIiwiZXhwb3J0cyIsImRiIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kIiwicG9zdCIsInN0YXJ0TGF0aXR1ZGUiLCJOdW1iZXIiLCJib2R5Iiwic3RhcnRfbGF0Iiwic3RhcnRMb25naXR1ZGUiLCJzdGFydF9sb25nIiwiZW5kTGF0aXR1ZGUiLCJlbmRfbGF0IiwiZW5kTG9uZ2l0dWRlIiwiZW5kX2xvbmciLCJyaWRlck5hbWUiLCJyaWRlcl9uYW1lIiwiZHJpdmVyTmFtZSIsImRyaXZlcl9uYW1lIiwiZHJpdmVyVmVoaWNsZSIsImRyaXZlcl92ZWhpY2xlIiwibG9nIiwiRXJyb3IiLCJlcnJvcl9jb2RlIiwibWVzc2FnZSIsImxlbmd0aCIsInZhbHVlcyIsInJlc3VsdCIsInJ1biIsImVyciIsImFsbCIsImxhc3RJRCIsInJvd3MiLCJwYWdlIiwicXVlcnkiLCJyb3dfb2ZfcGFnZSIsInVuZGVmaW5lZCIsIm9mZnNldCIsImNvbnNvbGUiLCJwYXJhbXMiLCJpZCJdLCJtYXBwaW5ncyI6IkFBQUEsYSwyd1lBZVk7MkZBYlosS0FBTUEsQ0FBQUEsT0FBTywwQkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFiLENBQ0EsS0FBTUMsQ0FBQUEsR0FBRywwQkFBR0YsT0FBTyxFQUFWLENBQVQsQ0FFQSxLQUFNRyxDQUFBQSxVQUFVLDBCQUFHRixPQUFPLENBQUMsYUFBRCxDQUFW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LENBQVMsQ0FDWm9CLFVBQVUsQ0FBRSx1QkFEQSxDQUVaQyxPQUFPLENBQUUsMEJBRkcsQ0FBVCxDQUFQLENBSUgsQ0FMRCxrQ0FUb0YseUJBZ0JwRnRCLEdBQUcsQ0FBQ0MsSUFBSixDQUFTNkIsSUFBVCxFQUNILENBakJELEVBa0JILENBbkJELEVBM0kwQyx5QkFnSzFDbEMsT0FBTyxDQUFDeEIsR0FBRCxDQUFQLENBQ0gsQ0FqS00sQ0FBUCxDQWtLSCxDQW5LRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG5jb25zdCBqc29uUGFyc2VyID0gYm9keVBhcnNlci5qc29uKCk7XG5cbmNvbnN0IHdpbnN0b24gPSByZXF1aXJlKCd3aW5zdG9uJyk7XG5cbmNvbnN0IGxvZ2dlciA9IHdpbnN0b24uY3JlYXRlTG9nZ2VyKHtcbiAgICBsZXZlbDogJ2luZm8nLFxuICAgIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuanNvbigpLFxuICAgIGRlZmF1bHRNZXRhOiB7IHNlcnZpY2U6ICd1c2VyLXNlcnZpY2UnIH0sXG4gICAgdHJhbnNwb3J0czogW1xuICAgICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5GaWxlKHsgZmlsZW5hbWU6ICdlcnJvci5sb2cnLCBsZXZlbDogJ2Vycm9yJyB9KSxcbiAgICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7IGZpbGVuYW1lOiAnY29tYmluZWQubG9nJyB9KSxcbiAgICBdLFxufSk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgbG9nZ2VyLmFkZChuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkNvbnNvbGUoe1xuICAgICAgZm9ybWF0OiB3aW5zdG9uLmZvcm1hdC5zaW1wbGUoKSxcbiAgICB9KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKGRiKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgYXdhaXQgYXBwLmdldCgnL2hlYWx0aCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLnNlbmQoJ0hlYWx0aHknKSlcbiAgICAgICAgfSlcblxuICAgICAgICBhcHAucG9zdCgnL3JpZGVzJywganNvblBhcnNlciwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGFydExhdGl0dWRlID0gTnVtYmVyKHJlcS5ib2R5LnN0YXJ0X2xhdCk7XG4gICAgICAgICAgICBjb25zdCBzdGFydExvbmdpdHVkZSA9IE51bWJlcihyZXEuYm9keS5zdGFydF9sb25nKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZExhdGl0dWRlID0gTnVtYmVyKHJlcS5ib2R5LmVuZF9sYXQpO1xuICAgICAgICAgICAgY29uc3QgZW5kTG9uZ2l0dWRlID0gTnVtYmVyKHJlcS5ib2R5LmVuZF9sb25nKTtcbiAgICAgICAgICAgIGNvbnN0IHJpZGVyTmFtZSA9IHJlcS5ib2R5LnJpZGVyX25hbWU7XG4gICAgICAgICAgICBjb25zdCBkcml2ZXJOYW1lID0gcmVxLmJvZHkuZHJpdmVyX25hbWU7XG4gICAgICAgICAgICBjb25zdCBkcml2ZXJWZWhpY2xlID0gcmVxLmJvZHkuZHJpdmVyX3ZlaGljbGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzdGFydExhdGl0dWRlIDwgLTkwIHx8IHN0YXJ0TGF0aXR1ZGUgPiA5MCB8fCBzdGFydExvbmdpdHVkZSA8IC0xODAgfHwgc3RhcnRMb25naXR1ZGUgPiAxODApIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcignU3RhcnQgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSBtdXN0IGJlIGJldHdlZW4gLTkwIC0gOTAgYW5kIC0xODAgdG8gMTgwIGRlZ3JlZXMgcmVzcGVjdGl2ZWx5JykpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1N0YXJ0IGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgbXVzdCBiZSBiZXR3ZWVuIC05MCAtIDkwIGFuZCAtMTgwIHRvIDE4MCBkZWdyZWVzIHJlc3BlY3RpdmVseSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVuZExhdGl0dWRlIDwgLTkwIHx8IGVuZExhdGl0dWRlID4gOTAgfHwgZW5kTG9uZ2l0dWRlIDwgLTE4MCB8fCBlbmRMb25naXR1ZGUgPiAxODApIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcignRW5kIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgbXVzdCBiZSBiZXR3ZWVuIC05MCAtIDkwIGFuZCAtMTgwIHRvIDE4MCBkZWdyZWVzIHJlc3BlY3RpdmVseScpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFbmQgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSBtdXN0IGJlIGJldHdlZW4gLTkwIC0gOTAgYW5kIC0xODAgdG8gMTgwIGRlZ3JlZXMgcmVzcGVjdGl2ZWx5J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJpZGVyTmFtZSAhPT0gJ3N0cmluZycgfHwgcmlkZXJOYW1lLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcignUmlkZXIgbmFtZSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZycpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdSaWRlciBuYW1lIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRyaXZlck5hbWUgIT09ICdzdHJpbmcnIHx8IGRyaXZlck5hbWUubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coJ2Vycm9yJywgbmV3IEVycm9yKCdSaWRlciBuYW1lIG11c3QgYmUgYSBub24gZW1wdHkgc3RyaW5nJykpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1JpZGVyIG5hbWUgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgZHJpdmVyVmVoaWNsZSAhPT0gJ3N0cmluZycgfHwgZHJpdmVyVmVoaWNsZS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoJ1JpZGVyIG5hbWUgbXVzdCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcnKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUmlkZXIgbmFtZSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtyZXEuYm9keS5zdGFydF9sYXQsIHJlcS5ib2R5LnN0YXJ0X2xvbmcsIHJlcS5ib2R5LmVuZF9sYXQsIHJlcS5ib2R5LmVuZF9sb25nLCByZXEuYm9keS5yaWRlcl9uYW1lLCByZXEuYm9keS5kcml2ZXJfbmFtZSwgcmVxLmJvZHkuZHJpdmVyX3ZlaGljbGVdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBkYi5ydW4oJ0lOU0VSVCBJTlRPIFJpZGVzKHN0YXJ0TGF0LCBzdGFydExvbmcsIGVuZExhdCwgZW5kTG9uZywgcmlkZXJOYW1lLCBkcml2ZXJOYW1lLCBkcml2ZXJWZWhpY2xlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8pJywgdmFsdWVzLCBhc3luYyBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcihlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdTRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRiLmFsbCgnU0VMRUNUICogRlJPTSBSaWRlcyBXSEVSRSByaWRlSUQgPSA/JywgdGhpcy5sYXN0SUQsIGFzeW5jIGZ1bmN0aW9uIChlcnIsIHJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdTRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZChyb3dzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBhcHAuZ2V0KCcvcmlkZXMnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgIGxldCBwYWdlID0gcmVxLnF1ZXJ5LnBhZ2U7XG4gICAgICAgICAgICBsZXQgcm93X29mX3BhZ2UgPSAgcmVxLnF1ZXJ5LnJvd19vZl9wYWdlO1xuICAgICAgICAgICAgbGV0IHF1ZXJ5ID0gYGA7XG4gICAgICAgICAgICBpZihwYWdlICE9IHVuZGVmaW5lZCAmJiByb3dfb2ZfcGFnZSAhPSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIGlmKHBhZ2UgPiAtMSAmJiByb3dfb2ZfcGFnZSA+IC0xKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9mZnNldCA9IChwYWdlLTEpKnJvd19vZl9wYWdlO1xuICAgICAgICAgICAgICAgICAgICAvLyBxdWVyeSA9IGBTRUxFQ1QgKiBGUk9NIFJpZGVzIExJTUlUICR7cm93X29mX3BhZ2V9IE9GRlNFVCAke29mZnNldH07YFxuICAgICAgICAgICAgICAgICAgICBkYi5hbGwoJ1NFTEVDVCAqIEZST00gUmlkZXMgTElNSVQgPyBPRkZTRVQgPycsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd19vZl9wYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgIF0sIGFzeW5jIGZ1bmN0aW9uIChlcnIsIHJvd3Mpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coJ2Vycm9yJywgbmV3IEVycm9yKGVycikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1JJREVTX05PVF9GT1VORF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb3VsZCBub3QgZmluZCBhbnkgcmlkZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQocm93cyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jb2RlOiAnUEFHRSBBTkQgUk9XUyBBUkUgTkVHQVRJVkUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCByZW5kZXIgbmVnYXRpdmUgcGFnZXMgb3Igcm93cydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgcXVlcnkgPSBgU0VMRUNUICogRlJPTSBSaWRlc2BcbiAgICAgICAgICAgICAgICBkYi5hbGwocXVlcnksIGFzeW5jIGZ1bmN0aW9uIChlcnIsIHJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZygnZXJyb3InLCBuZXcgRXJyb3IoZXJyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdTRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1JJREVTX05PVF9GT1VORF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NvdWxkIG5vdCBmaW5kIGFueSByaWRlcydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQocm93cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFwcC5nZXQoJy9yaWRlcy86aWQnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgIGRiLmFsbCgnU0VMRUNUICogRlJPTSBSaWRlcyBXSEVSRSByaWRlSUQgPSA/JywgcmVxLnBhcmFtcy5pZCwgYXN5bmMgZnVuY3Rpb24gKGVyciwgcm93cyl7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKCdlcnJvcicsIG5ldyBFcnJvcihlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ICdTRVJWRVJfRVJST1InLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogJ1JJREVTX05PVF9GT1VORF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGZpbmQgYW55IHJpZGVzJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXMuc2VuZChyb3dzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXNvbHZlKGFwcCk7XG4gICAgfSlcbn07XG4iXX0=